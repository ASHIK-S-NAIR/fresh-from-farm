{"ast":null,"code":"import _asyncToGenerator from\"F:/mern/projects/greenbeans/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"F:/mern/projects/greenbeans/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"F:\\\\mern\\\\projects\\\\greenbeans\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect}from\"react\";import{isAuthenticated}from\"../auth\";import{deleteCustomer,getCustomers}from\"../user\";import moment from\"moment\";import ViewIcon from\"../icons/view.svg\";import TrashIcon from\"../icons/Trash.svg\";import CustomerDetail from\"./CustomerDetail\";import DeleteCustomer from\"./DeleteCustomer\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Customer=function Customer(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),customers=_useState2[0],setCustomers=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),customerDetail=_useState4[0],setCustomerDetail=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),deleteCustomerActive=_useState6[0],setDeleteCustomerActive=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),customer=_useState8[0],setCustomer=_useState8[1];var _isAuthenticated=isAuthenticated(),user=_isAuthenticated.user,token=_isAuthenticated.token;var loadCustomers=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userId,token){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getCustomers(userId,token);case 3:data=_context.sent;if(!data.error){_context.next=8;break;}return _context.abrupt(\"return\",console.log(data.error));case 8:return _context.abrupt(\"return\",setCustomers(data));case 9:_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);return _context.abrupt(\"return\",console.log(_context.t0));case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function loadCustomers(_x,_x2){return _ref.apply(this,arguments);};}();var handlePreview=function handlePreview(customer){return setCustomerDetail(\"customerDetail\"),setCustomer(customer);};var handleDelete=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(customer){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt(\"return\",(setDeleteCustomerActive(\"deleteCustomer\"),setCustomer(customer)));case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function handleDelete(_x3){return _ref2.apply(this,arguments);};}();useEffect(function(){loadCustomers(user._id,token);},[]);// console.log(\"Customers\", customers);\nreturn/*#__PURE__*/_jsxs(\"section\",{className:\"adminDashPanel-section customer-section\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"adminDashPanel-right-header\",children:\"Customers\"}),/*#__PURE__*/_jsx(\"div\",{className:\"adminDashPanel-right-subsection\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"adminDashPanel-right-table\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"adminDashPanel-right-table-head-sec\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"adminDashPanel-right-table-head-value\",children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"adminDashPanel-right-table-head-value\",children:\"Customer ID\"}),/*#__PURE__*/_jsx(\"th\",{className:\"adminDashPanel-right-table-head-value\",children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{className:\"adminDashPanel-right-table-head-value\",children:\"Phone Number\"}),/*#__PURE__*/_jsx(\"th\",{className:\"adminDashPanel-right-table-head-value\",children:\"Address\"}),/*#__PURE__*/_jsx(\"th\",{className:\"adminDashPanel-right-table-head-value\",children:\"Created At\"}),/*#__PURE__*/_jsx(\"th\",{className:\"adminDashPanel-right-table-head-value\",children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"adminDashPanel-right-table-body-sec\",children:customers&&customers.map(function(customer,index){return/*#__PURE__*/_jsxs(\"tr\",{className:\"adminDashPanel-right-table-body-tr\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"adminDashPanel-right-table-body-value\",children:customer.name}),/*#__PURE__*/_jsx(\"td\",{className:\"adminDashPanel-right-table-body-value\",children:customer._id}),/*#__PURE__*/_jsx(\"td\",{className:\"adminDashPanel-right-table-body-value\",children:customer.email}),/*#__PURE__*/_jsx(\"td\",{className:\"adminDashPanel-right-table-body-value\",children:customer.phoneNumber}),/*#__PURE__*/_jsxs(\"td\",{className:\"adminDashPanel-right-table-body-value\",children:[customer.address.houseName,/*#__PURE__*/_jsx(\"br\",{}),customer.address.streetName]}),/*#__PURE__*/_jsx(\"td\",{className:\"adminDashPanel-right-table-body-value\",children:moment(customer.createdAt).format(\"DD-MMM-yyyy\")}),/*#__PURE__*/_jsxs(\"td\",{className:\"adminDashPanel-right-table-body-value\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handlePreview(customer);},children:/*#__PURE__*/_jsx(\"img\",{src:ViewIcon,alt:\"\",className:\"adminDashPanel-right-table-icon \"})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleDelete(customer);},children:/*#__PURE__*/_jsx(\"img\",{src:TrashIcon,alt:\"\",className:\"adminDashPanel-right-table-icon \"})})]})]},index);})})]})}),customerDetail===\"customerDetail\"&&/*#__PURE__*/_jsx(CustomerDetail,{customer:customer,setCustomerDetail:setCustomerDetail}),deleteCustomerActive===\"deleteCustomer\"&&/*#__PURE__*/_jsx(DeleteCustomer,{customer:customer,setDeleteCustomerActive:setDeleteCustomerActive})]});};export default Customer;","map":{"version":3,"sources":["F:/mern/projects/greenbeans/client/src/admin/Customer.js"],"names":["React","useState","useEffect","isAuthenticated","deleteCustomer","getCustomers","moment","ViewIcon","TrashIcon","CustomerDetail","DeleteCustomer","Customer","customers","setCustomers","customerDetail","setCustomerDetail","deleteCustomerActive","setDeleteCustomerActive","customer","setCustomer","user","token","loadCustomers","userId","data","error","console","log","handlePreview","handleDelete","_id","map","index","name","email","phoneNumber","address","houseName","streetName","createdAt","format"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { isAuthenticated } from \"../auth\";\r\nimport { deleteCustomer, getCustomers } from \"../user\";\r\nimport moment from \"moment\";\r\nimport ViewIcon from \"../icons/view.svg\";\r\nimport TrashIcon from \"../icons/Trash.svg\";\r\nimport CustomerDetail from \"./CustomerDetail\";\r\nimport DeleteCustomer from \"./DeleteCustomer\";\r\n\r\nconst Customer = () => {\r\n  const [customers, setCustomers] = useState([]);\r\n  const [customerDetail, setCustomerDetail] = useState(\"\");\r\n  const [deleteCustomerActive, setDeleteCustomerActive] = useState(\"\");\r\n  const [customer, setCustomer] = useState(\"\");\r\n\r\n  const { user, token } = isAuthenticated();\r\n\r\n  const loadCustomers = async (userId, token) => {\r\n    try {\r\n      const data = await getCustomers(userId, token);\r\n      if (data.error) {\r\n        return console.log(data.error);\r\n      } else {\r\n        return setCustomers(data);\r\n      }\r\n    } catch (error) {\r\n      return console.log(error);\r\n    }\r\n  };\r\n\r\n  const handlePreview = (customer) => {\r\n    return setCustomerDetail(\"customerDetail\"), setCustomer(customer);\r\n  };\r\n\r\n  const handleDelete = async (customer) => {\r\n    return setDeleteCustomerActive(\"deleteCustomer\"), setCustomer(customer);\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadCustomers(user._id, token);\r\n  }, []);\r\n\r\n  // console.log(\"Customers\", customers);\r\n\r\n  return (\r\n    <section className=\"adminDashPanel-section customer-section\">\r\n      <h1 className=\"adminDashPanel-right-header\">Customers</h1>\r\n      <div className=\"adminDashPanel-right-subsection\">\r\n        <table className=\"adminDashPanel-right-table\">\r\n          <thead className=\"adminDashPanel-right-table-head-sec\">\r\n            <tr>\r\n              <th className=\"adminDashPanel-right-table-head-value\">Name</th>\r\n              <th className=\"adminDashPanel-right-table-head-value\">\r\n                Customer ID\r\n              </th>\r\n              <th className=\"adminDashPanel-right-table-head-value\">Email</th>\r\n              <th className=\"adminDashPanel-right-table-head-value\">\r\n                Phone Number\r\n              </th>\r\n              <th className=\"adminDashPanel-right-table-head-value\">Address</th>\r\n              <th className=\"adminDashPanel-right-table-head-value\">\r\n                Created At\r\n              </th>\r\n              <th className=\"adminDashPanel-right-table-head-value\">Action</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"adminDashPanel-right-table-body-sec\">\r\n            {customers &&\r\n              customers.map((customer, index) => {\r\n                return (\r\n                  <tr\r\n                    key={index}\r\n                    className=\"adminDashPanel-right-table-body-tr\"\r\n                  >\r\n                    <td className=\"adminDashPanel-right-table-body-value\">\r\n                      {customer.name}\r\n                    </td>\r\n                    <td className=\"adminDashPanel-right-table-body-value\">\r\n                      {customer._id}\r\n                    </td>\r\n                    <td className=\"adminDashPanel-right-table-body-value\">\r\n                      {customer.email}\r\n                    </td>\r\n                    <td className=\"adminDashPanel-right-table-body-value\">\r\n                      {customer.phoneNumber}\r\n                    </td>\r\n                    <td className=\"adminDashPanel-right-table-body-value\">\r\n                      {customer.address.houseName}\r\n                      <br />\r\n                      {customer.address.streetName}\r\n                    </td>\r\n                    <td className=\"adminDashPanel-right-table-body-value\">\r\n                      {moment(customer.createdAt).format(\"DD-MMM-yyyy\")}\r\n                    </td>\r\n                    <td className=\"adminDashPanel-right-table-body-value\">\r\n                      <button onClick={() => handlePreview(customer)}>\r\n                        <img\r\n                          src={ViewIcon}\r\n                          alt=\"\"\r\n                          className=\"adminDashPanel-right-table-icon \"\r\n                        />\r\n                      </button>\r\n                      <button onClick={() => handleDelete(customer)}>\r\n                        <img\r\n                          src={TrashIcon}\r\n                          alt=\"\"\r\n                          className=\"adminDashPanel-right-table-icon \"\r\n                        />\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n      {customerDetail === \"customerDetail\" && (\r\n        <CustomerDetail\r\n          customer={customer}\r\n          setCustomerDetail={setCustomerDetail}\r\n        />\r\n      )}\r\n      {deleteCustomerActive === \"deleteCustomer\" && (\r\n        <DeleteCustomer\r\n          customer={customer}\r\n          setDeleteCustomerActive={setDeleteCustomerActive}\r\n        />\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Customer;\r\n"]},"metadata":{},"sourceType":"module"}