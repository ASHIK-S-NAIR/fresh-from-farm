{"ast":null,"code":"import _asyncToGenerator from\"F:/mern/projects/greenbeans/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"F:/mern/projects/greenbeans/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"F:\\\\mern\\\\projects\\\\greenbeans\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect}from\"react\";import{BrowserRouter,Routes as Router,Route}from\"react-router-dom\";import{AuthContext,CartContext}from\"./context/Context\";import Nav from\"./core/Nav\";import ProductDetail from\"./core/ProductDetail\";import Shop from\"./core/Shop\";import AdminRoutes from\"./auth/AdminRoutes\";import EmployeeRoutes from\"./auth/EmployeeRoutes\";import CustomerRoutes from\"./auth/CustomerRoutes\";import CustomerBoard from\"./core/CustomerBoard\";import EmployeeBoard from\"./core/EmployeeBoard.\";import AdminBoard from\"./core/AdminBoard\";import Signup from\"./user/Signup\";import Login from\"./user/Login\";import Cart from\"./core/Cart\";import{CartPayment}from\"./core/CartPayment\";import ThankYou from\"./core/ThankYou\";import AdminDashPanel from\"./core/AdminDashPanel\";import Footer from\"./core/Footer\";import ScrollToTop from\"./ScrollToTop\";import{getUserCart}from\"./user\";import{isAuthenticated}from\"./auth\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Routes=function Routes(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),authActive=_useState2[0],setAuthActive=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),cart=_useState4[0],setCart=_useState4[1];var preLoadCart=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userId,token){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getUserCart(userId,token);case 3:data=_context.sent;return _context.abrupt(\"return\",setCart(data.cart));case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function preLoadCart(_x,_x2){return _ref.apply(this,arguments);};}();useEffect(function(){if(isAuthenticated()&&isAuthenticated().user.role===0){preLoadCart(isAuthenticated().user._id,isAuthenticated().token);}},[]);return/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsx(AuthContext.Provider,{value:{authActive:authActive,setAuthActive:setAuthActive},children:/*#__PURE__*/_jsx(CartContext.Provider,{value:{cart:cart,setCart:setCart,preLoadCart:preLoadCart},children:/*#__PURE__*/_jsxs(ScrollToTop,{children:[/*#__PURE__*/_jsx(Nav,{}),/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Shop,{})}),/*#__PURE__*/_jsx(Route,{path:\"/product/:productId\",element:/*#__PURE__*/_jsx(ProductDetail,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(\"p\",{children:\"There is nothing here 404!\"})}),/*#__PURE__*/_jsx(Route,{path:\"/customerboard/:currentTab/:userId\",element:/*#__PURE__*/_jsx(CustomerRoutes,{children:/*#__PURE__*/_jsx(CustomerBoard,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/cart/payment/:userId\",element:/*#__PURE__*/_jsx(CustomerRoutes,{children:/*#__PURE__*/_jsx(CartPayment,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/employeeboard/:currentTab/:userId\",element:/*#__PURE__*/_jsx(EmployeeRoutes,{children:/*#__PURE__*/_jsx(EmployeeBoard,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/adminboard/:currentTab/:userId\",element:/*#__PURE__*/_jsx(AdminRoutes,{children:/*#__PURE__*/_jsx(AdminBoard,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/admindashpanel/:currentTab/:userId\",element:/*#__PURE__*/_jsx(AdminRoutes,{children:/*#__PURE__*/_jsx(AdminDashPanel,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/cart/:userId\",element:/*#__PURE__*/_jsx(CustomerRoutes,{children:/*#__PURE__*/_jsx(Cart,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/thankyou/:orderId\",element:/*#__PURE__*/_jsx(CustomerRoutes,{children:/*#__PURE__*/_jsx(ThankYou,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/signup\",element:/*#__PURE__*/_jsx(Signup,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})})]}),/*#__PURE__*/_jsx(Footer,{})]})})})});};export default Routes;","map":{"version":3,"sources":["F:/mern/projects/greenbeans/client/src/Routes.js"],"names":["React","useState","useEffect","BrowserRouter","Routes","Router","Route","AuthContext","CartContext","Nav","ProductDetail","Shop","AdminRoutes","EmployeeRoutes","CustomerRoutes","CustomerBoard","EmployeeBoard","AdminBoard","Signup","Login","Cart","CartPayment","ThankYou","AdminDashPanel","Footer","ScrollToTop","getUserCart","isAuthenticated","authActive","setAuthActive","cart","setCart","preLoadCart","userId","token","data","console","log","user","role","_id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { BrowserRouter, Routes as Router, Route } from \"react-router-dom\";\r\nimport { AuthContext, CartContext } from \"./context/Context\";\r\n\r\nimport Nav from \"./core/Nav\";\r\nimport ProductDetail from \"./core/ProductDetail\";\r\nimport Shop from \"./core/Shop\";\r\nimport AdminRoutes from \"./auth/AdminRoutes\";\r\nimport EmployeeRoutes from \"./auth/EmployeeRoutes\";\r\nimport CustomerRoutes from \"./auth/CustomerRoutes\";\r\nimport CustomerBoard from \"./core/CustomerBoard\";\r\nimport EmployeeBoard from \"./core/EmployeeBoard.\";\r\nimport AdminBoard from \"./core/AdminBoard\";\r\nimport Signup from \"./user/Signup\";\r\nimport Login from \"./user/Login\";\r\n\r\nimport Cart from \"./core/Cart\";\r\nimport { CartPayment } from \"./core/CartPayment\";\r\nimport ThankYou from \"./core/ThankYou\";\r\nimport AdminDashPanel from \"./core/AdminDashPanel\";\r\nimport Footer from \"./core/Footer\";\r\nimport ScrollToTop from \"./ScrollToTop\";\r\nimport { getUserCart } from \"./user\";\r\nimport { isAuthenticated } from \"./auth\";\r\n\r\nconst Routes = () => {\r\n  const [authActive, setAuthActive] = useState(null);\r\n  const [cart, setCart] = useState([]);\r\n\r\n  const preLoadCart = async (userId, token) => {\r\n    try {\r\n      const data = await getUserCart(userId, token);\r\n      return setCart(data.cart);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isAuthenticated() && isAuthenticated().user.role === 0) {\r\n      preLoadCart(isAuthenticated().user._id, isAuthenticated().token);\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <BrowserRouter>\r\n      <AuthContext.Provider value={{ authActive, setAuthActive }}>\r\n        <CartContext.Provider value={{ cart, setCart, preLoadCart }}>\r\n          <ScrollToTop>\r\n            <Nav />\r\n            <Router>\r\n              <Route path=\"/\" element={<Shop />} />\r\n              <Route path=\"/product/:productId\" element={<ProductDetail />} />\r\n              <Route path=\"*\" element={<p>There is nothing here 404!</p>} />\r\n              <Route\r\n                path=\"/customerboard/:currentTab/:userId\"\r\n                element={\r\n                  <CustomerRoutes>\r\n                    <CustomerBoard />\r\n                  </CustomerRoutes>\r\n                }\r\n              />\r\n              <Route\r\n                path=\"/cart/payment/:userId\"\r\n                element={\r\n                  <CustomerRoutes>\r\n                    <CartPayment />\r\n                  </CustomerRoutes>\r\n                }\r\n              />\r\n              <Route\r\n                path=\"/employeeboard/:currentTab/:userId\"\r\n                element={\r\n                  <EmployeeRoutes>\r\n                    <EmployeeBoard />\r\n                  </EmployeeRoutes>\r\n                }\r\n              />\r\n              <Route\r\n                path=\"/adminboard/:currentTab/:userId\"\r\n                element={\r\n                  <AdminRoutes>\r\n                    <AdminBoard />\r\n                  </AdminRoutes>\r\n                }\r\n              />\r\n              <Route\r\n                path=\"/admindashpanel/:currentTab/:userId\"\r\n                element={\r\n                  <AdminRoutes>\r\n                    <AdminDashPanel />\r\n                  </AdminRoutes>\r\n                }\r\n              />\r\n              <Route\r\n                path=\"/cart/:userId\"\r\n                element={\r\n                  <CustomerRoutes>\r\n                    <Cart />\r\n                  </CustomerRoutes>\r\n                }\r\n              />\r\n              <Route\r\n                path=\"/thankyou/:orderId\"\r\n                element={\r\n                  <CustomerRoutes>\r\n                    <ThankYou />\r\n                  </CustomerRoutes>\r\n                }\r\n              />\r\n              <Route path=\"/signup\" element={<Signup />} />\r\n              <Route path=\"/login\" element={<Login />} />\r\n            </Router>\r\n            <Footer />\r\n          </ScrollToTop>\r\n        </CartContext.Provider>\r\n      </AuthContext.Provider>\r\n    </BrowserRouter>\r\n  );\r\n};\r\n\r\nexport default Routes;\r\n"]},"metadata":{},"sourceType":"module"}