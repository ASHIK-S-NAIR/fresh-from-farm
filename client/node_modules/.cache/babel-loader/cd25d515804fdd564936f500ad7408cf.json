{"ast":null,"code":"import _defineProperty from\"F:/mern/projects/greenbeans/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"F:/mern/projects/greenbeans/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"F:/mern/projects/greenbeans/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"F:/mern/projects/greenbeans/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"F:\\\\mern\\\\projects\\\\greenbeans\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useContext,useEffect}from\"react\";import{useParams}from\"react-router-dom\";import{isAuthenticated}from\"../auth\";import{AccountsContext}from\"../context/Context\";import{updateUser,getUser}from\"../user\";import Cross from\"../icons/cross-black.svg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditPersonalInformation=function EditPersonalInformation(){var _useParams=useParams(),userId=_useParams.userId;var _useContext=useContext(AccountsContext),setAccountsActive=_useContext.setAccountsActive;var _useState=useState({email:\"\",name:\"\",phoneNumber:\"\",error:\"\",loading:\"\",success:false}),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var preLoadValues={name:\"\",phoneNumber:\"\"};var email=values.email,name=values.name,phoneNumber=values.phoneNumber,error=values.error,loading=values.loading,success=values.success;var _isAuthenticated=isAuthenticated(),user=_isAuthenticated.user,token=_isAuthenticated.token;var preLoad=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userId,token){var userDetails;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getUser(userId,token);case 3:userDetails=_context.sent;preLoadValues={name:userDetails.name,phoneNumber:userDetails.phoneNumber};return _context.abrupt(\"return\",setValues(_objectSpread(_objectSpread({},values),{},{name:userDetails.name,email:userDetails.email,phoneNumber:userDetails.phoneNumber})));case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function preLoad(_x,_x2){return _ref.apply(this,arguments);};}();useEffect(function(){preLoad(userId,token);},[]);var handleChange=function handleChange(name){return function(event){setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({},name,event.target.value)));};};var onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();setValues(_objectSpread(_objectSpread({},values),{},{loading:\"loading\"}));if(name&&phoneNumber){_context2.next=5;break;}console.log(\"Please fill all the fields\");return _context2.abrupt(\"return\",setValues(_objectSpread(_objectSpread({},values),{},{loading:\"\",success:false,error:\"Fill all the fields\"})));case 5:if(!(name===preLoadValues.name&&phoneNumber===preLoadValues.phoneNumber)){_context2.next=7;break;}return _context2.abrupt(\"return\",setValues(_objectSpread(_objectSpread({},values),{},{loading:\"\",success:false,error:\"No Change\"})));case 7:if(!(phoneNumber.length!==10)){_context2.next=9;break;}return _context2.abrupt(\"return\",setValues(_objectSpread(_objectSpread({},values),{},{loading:\"\",success:false,error:\"Enter valid phone Number\"})));case 9:_context2.prev=9;_context2.next=12;return updateUser({name:name,phoneNumber:phoneNumber},userId,token);case 12:data=_context2.sent;if(!data.error){_context2.next=16;break;}console.log(data.error);return _context2.abrupt(\"return\",setValues(_objectSpread(_objectSpread({},values),{},{loading:\"\",success:false,error:data.error})));case 16:return _context2.abrupt(\"return\",setAccountsActive(null));case 19:_context2.prev=19;_context2.t0=_context2[\"catch\"](9);console.log(_context2.t0);return _context2.abrupt(\"return\",setValues(_objectSpread(_objectSpread({},values),{},{loading:\"\",success:false,error:_context2.t0})));case 23:case\"end\":return _context2.stop();}}},_callee2,null,[[9,19]]);}));return function onSubmit(_x3){return _ref2.apply(this,arguments);};}();var errorMessage=function errorMessage(){return/*#__PURE__*/_jsxs(\"div\",{className:\"errorMessage-sec\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"errorMessage-cross-sec\",onClick:function onClick(){return setValues(_objectSpread(_objectSpread({},values),{},{error:\"\"}));},children:[/*#__PURE__*/_jsx(\"div\",{className:\"errorMessage-cross-one\"}),/*#__PURE__*/_jsx(\"div\",{className:\"errorMessage-cross-two\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"errorMessage-msg-sec\",children:/*#__PURE__*/_jsx(\"p\",{className:\"errorMessage-msg\",children:error})})]});};return/*#__PURE__*/_jsx(\"section\",{className:\"signup-section\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"black-background\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"popup-big-sec\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"popup-group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"popup-head-sec\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"popup-header\",children:\"Edit Personal Information\"}),/*#__PURE__*/_jsx(\"div\",{className:\"cross-sec\",onClick:function onClick(){return setAccountsActive(null);},children:/*#__PURE__*/_jsx(\"img\",{src:Cross,alt:\"\",className:\"cross-img\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"popup-form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"popup-form-single-group\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"popup-form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"popup-form-label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"p\",{className:\"popup-form-value\",children:email})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"popup-form-single-group\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"popup-form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"popup-form-label\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"popup-form-input\",value:name,onChange:handleChange(\"name\")})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"popup-form-single-group\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"popup-form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"popup-form-label\",children:\"Phone\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"popup-form-input\",value:phoneNumber,onChange:handleChange(\"phoneNumber\")})]})}),/*#__PURE__*/_jsx(\"button\",{className:\"popup-form-btn\",onClick:onSubmit,children:\"Update\"})]})]})}),error&&errorMessage()]})});};export default EditPersonalInformation;","map":{"version":3,"sources":["F:/mern/projects/greenbeans/client/src/core/EditPersonalInformation.js"],"names":["React","useState","useContext","useEffect","useParams","isAuthenticated","AccountsContext","updateUser","getUser","Cross","EditPersonalInformation","userId","setAccountsActive","email","name","phoneNumber","error","loading","success","values","setValues","preLoadValues","user","token","preLoad","userDetails","console","log","handleChange","event","target","value","onSubmit","preventDefault","length","data","errorMessage"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { isAuthenticated } from \"../auth\";\r\nimport { AccountsContext } from \"../context/Context\";\r\nimport { updateUser, getUser } from \"../user\";\r\nimport Cross from \"../icons/cross-black.svg\";\r\n\r\nconst EditPersonalInformation = () => {\r\n  const { userId } = useParams();\r\n\r\n  const { setAccountsActive } = useContext(AccountsContext);\r\n\r\n  const [values, setValues] = useState({\r\n    email: \"\",\r\n    name: \"\",\r\n    phoneNumber: \"\",\r\n    error: \"\",\r\n    loading: \"\",\r\n    success: false,\r\n  });\r\n\r\n  var preLoadValues = {\r\n    name: \"\",\r\n    phoneNumber: \"\",\r\n  };\r\n\r\n  const { email, name, phoneNumber, error, loading, success } = values;\r\n\r\n  const { user, token } = isAuthenticated();\r\n\r\n  const preLoad = async (userId, token) => {\r\n    try {\r\n      const userDetails = await getUser(userId, token);\r\n\r\n      preLoadValues = {\r\n        name: userDetails.name,\r\n        phoneNumber: userDetails.phoneNumber,\r\n      };\r\n\r\n      return setValues({\r\n        ...values,\r\n        name: userDetails.name,\r\n        email: userDetails.email,\r\n        phoneNumber: userDetails.phoneNumber,\r\n      });\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    preLoad(userId, token);\r\n  }, []);\r\n\r\n  const handleChange = (name) => (event) => {\r\n    setValues({ ...values, [name]: event.target.value });\r\n  };\r\n\r\n  const onSubmit = async (event) => {\r\n    event.preventDefault();\r\n    setValues({ ...values, loading: \"loading\" });\r\n\r\n    if (!(name && phoneNumber)) {\r\n      console.log(\"Please fill all the fields\");\r\n      return setValues({\r\n        ...values,\r\n        loading: \"\",\r\n        success: false,\r\n        error: \"Fill all the fields\",\r\n      });\r\n    }\r\n\r\n    if (\r\n      name === preLoadValues.name &&\r\n      phoneNumber === preLoadValues.phoneNumber\r\n    ) {\r\n      return setValues({\r\n        ...values,\r\n        loading: \"\",\r\n        success: false,\r\n        error: \"No Change\",\r\n      });\r\n    }\r\n\r\n    if (phoneNumber.length !== 10) {\r\n      return setValues({\r\n        ...values,\r\n        loading: \"\",\r\n        success: false,\r\n        error: \"Enter valid phone Number\",\r\n      });\r\n    }\r\n\r\n    try {\r\n      var data = await updateUser({ name, phoneNumber }, userId, token);\r\n\r\n      if (data.error) {\r\n        console.log(data.error);\r\n        return setValues({\r\n          ...values,\r\n          loading: \"\",\r\n          success: false,\r\n          error: data.error,\r\n        });\r\n      }\r\n\r\n      return setAccountsActive(null);\r\n    } catch (error) {\r\n      console.log(error);\r\n      return setValues({\r\n        ...values,\r\n        loading: \"\",\r\n        success: false,\r\n        error: error,\r\n      });\r\n    }\r\n  };\r\n\r\n  const errorMessage = () => {\r\n    return (\r\n      <div className=\"errorMessage-sec\">\r\n        <div\r\n          className=\"errorMessage-cross-sec\"\r\n          onClick={() => setValues({ ...values, error: \"\" })}\r\n        >\r\n          <div className=\"errorMessage-cross-one\"></div>\r\n          <div className=\"errorMessage-cross-two\"></div>\r\n        </div>\r\n        <div className=\"errorMessage-msg-sec\">\r\n          <p className=\"errorMessage-msg\">{error}</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <section className=\"signup-section\">\r\n      <div className=\"black-background\">\r\n        <div className=\"popup-big-sec\">\r\n          <div className=\"popup-group\">\r\n            <div className=\"popup-head-sec\">\r\n              <h1 className=\"popup-header\">Edit Personal Information</h1>\r\n              <div\r\n                className=\"cross-sec\"\r\n                onClick={() => setAccountsActive(null)}\r\n              >\r\n                <img src={Cross} alt=\"\" className=\"cross-img\" />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"popup-form\">\r\n              <div className=\"popup-form-single-group\">\r\n                <div className=\"popup-form-group\">\r\n                  <label className=\"popup-form-label\">Email</label>\r\n                  <p className=\"popup-form-value\">{email}</p>\r\n                </div>\r\n              </div>\r\n              <div className=\"popup-form-single-group\">\r\n                <div className=\"popup-form-group\">\r\n                  <label className=\"popup-form-label\">Name</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"popup-form-input\"\r\n                    value={name}\r\n                    onChange={handleChange(\"name\")}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"popup-form-single-group\">\r\n                <div className=\"popup-form-group\">\r\n                  <label className=\"popup-form-label\">Phone</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    className=\"popup-form-input\"\r\n                    value={phoneNumber}\r\n                    onChange={handleChange(\"phoneNumber\")}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <button className=\"popup-form-btn\" onClick={onSubmit}>\r\n                Update\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {error && errorMessage()}\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default EditPersonalInformation;\r\n"]},"metadata":{},"sourceType":"module"}