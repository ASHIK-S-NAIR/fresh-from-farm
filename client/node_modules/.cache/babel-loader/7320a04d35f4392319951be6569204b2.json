{"ast":null,"code":"import _asyncToGenerator from\"F:/mern/projects/greenbeans/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"F:/mern/projects/greenbeans/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"F:\\\\mern\\\\projects\\\\greenbeans\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect}from\"react\";import{isAuthenticated}from\"../auth\";import{getAllDeliveries}from\"../user\";import ViewIcon from\"../icons/view.svg\";import EditIcon from\"../icons/Edit.svg\";import OrderDetails from\"./OrderDetails\";import OrderUpdate from\"./OrderUpdate\";import PaymentStatusUpdate from\"./PaymentStatusUpdate\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Deliveries=function Deliveries(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),deliveries=_useState2[0],setDeliveires=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),order=_useState4[0],setOrder=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),orderActive=_useState6[0],setOrderActive=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),orderUpdateActive=_useState8[0],setOrderUpdateActive=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),orderUpdatePayment=_useState10[0],setOrderUpdatePayment=_useState10[1];var _isAuthenticated=isAuthenticated(),user=_isAuthenticated.user,token=_isAuthenticated.token;var loadDelivery=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userId,token){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getAllDeliveries(userId,token,\"all\");case 3:data=_context.sent;if(!data.error){_context.next=8;break;}return _context.abrupt(\"return\",console.log(data.error));case 8:return _context.abrupt(\"return\",setDeliveires(data.Eorders));case 9:_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);return _context.abrupt(\"return\",console.log(_context.t0));case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function loadDelivery(_x,_x2){return _ref.apply(this,arguments);};}();var handlePreview=function handlePreview(order){return setOrderActive(\"orderDetails\"),setOrder(order);};var handleEdit=function handleEdit(order){return setOrderUpdateActive(\"orderUpdateActive\"),setOrder(order);};var handlePaymentStatus=function handlePaymentStatus(order){return setOrderUpdatePayment(\"orderUpdatePayment\"),setOrder(order);};useEffect(function(){loadDelivery(user._id,token);},[]);return/*#__PURE__*/_jsxs(\"section\",{className:\"employeeBoard-section\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"employeeBoard-right-header\",children:\"Deliveries\"}),/*#__PURE__*/_jsx(\"div\",{className:\"employeeBoard-right-subsection\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"employeeBoard-right-table\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"employeeBoard-right-table-head-sec\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"employeeBoard-right-table-head-value\",children:\"Order ID\"}),/*#__PURE__*/_jsx(\"th\",{className:\"employeeBoard-right-table-head-value\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"employeeBoard-right-table-head-value\",children:\"Total\"}),/*#__PURE__*/_jsx(\"th\",{className:\"employeeBoard-right-table-head-value\",children:\"Payment Mode\"}),/*#__PURE__*/_jsx(\"th\",{className:\"employeeBoard-right-table-head-value\",children:\"Payment Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"employeeBoard-right-table-head-value\",children:\"Address\"}),/*#__PURE__*/_jsx(\"th\",{className:\"employeeBoard-right-table-head-value\",children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"employeeBoard-right-table-body-sec\",children:deliveries&&deliveries.map(function(order,index){return/*#__PURE__*/_jsxs(\"tr\",{className:\"employeeBoard-right-table-body-tr \",children:[/*#__PURE__*/_jsx(\"td\",{className:\"employeeBoard-right-table-body-value\",children:order.EorderId._id}),/*#__PURE__*/_jsx(\"td\",{className:\"employeeBoard-right-table-body-value\",children:/*#__PURE__*/_jsx(\"div\",{className:\"employeeBoard-right-table-body-div \".concat(order.EorderId.Ostatus),children:order.EorderId.Ostatus})}),/*#__PURE__*/_jsx(\"td\",{className:\"employeeBoard-right-table-body-value\",children:order.EorderId.OtotalPrice}),/*#__PURE__*/_jsx(\"td\",{className:\"employeeBoard-right-table-body-value\",children:order.EorderId.OpaymentMode}),/*#__PURE__*/_jsx(\"td\",{className:\"employeeBoard-right-table-body-value\",children:order.EorderId.OpaymentStatus===\"Paid\"?order.EorderId.OpaymentStatus:/*#__PURE__*/_jsx(\"button\",{className:\"adminDashPanel-right-table-body-value-btn\",onClick:function onClick(){return handlePaymentStatus(order.EorderId);},children:\"Pending\"})}),/*#__PURE__*/_jsxs(\"td\",{className:\"employeeBoard-right-table-body-value\",children:[order.EorderAddress.houseName,/*#__PURE__*/_jsx(\"br\",{}),order.EorderAddress.streetName]}),/*#__PURE__*/_jsxs(\"td\",{className:\"employeeBoard-right-table-body-value\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handlePreview(order);},children:/*#__PURE__*/_jsx(\"img\",{src:ViewIcon,alt:\"\",className:\"employeeBoard-right-table-icon vie\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleEdit(order.EorderId);},children:/*#__PURE__*/_jsx(\"img\",{src:EditIcon,alt:\"\",className:\"employeeBoard-right-table-icon vie\"})})]})]},index);})})]})}),orderActive===\"orderDetails\"&&/*#__PURE__*/_jsx(OrderDetails,{setOrderActive:setOrderActive,order:order}),orderUpdateActive===\"orderUpdateActive\"&&/*#__PURE__*/_jsx(OrderUpdate,{setOrderUpdateActive:setOrderUpdateActive,order:order}),orderUpdatePayment===\"orderUpdatePayment\"&&/*#__PURE__*/_jsx(PaymentStatusUpdate,{setOrderUpdatePayment:setOrderUpdatePayment,order:order})]});};export default Deliveries;","map":{"version":3,"sources":["F:/mern/projects/greenbeans/client/src/employee/Deliveries.js"],"names":["React","useState","useEffect","isAuthenticated","getAllDeliveries","ViewIcon","EditIcon","OrderDetails","OrderUpdate","PaymentStatusUpdate","Deliveries","deliveries","setDeliveires","order","setOrder","orderActive","setOrderActive","orderUpdateActive","setOrderUpdateActive","orderUpdatePayment","setOrderUpdatePayment","user","token","loadDelivery","userId","data","error","console","log","Eorders","handlePreview","handleEdit","handlePaymentStatus","_id","map","index","EorderId","Ostatus","OtotalPrice","OpaymentMode","OpaymentStatus","EorderAddress","houseName","streetName"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { isAuthenticated } from \"../auth\";\r\nimport { getAllDeliveries } from \"../user\";\r\nimport ViewIcon from \"../icons/view.svg\";\r\nimport EditIcon from \"../icons/Edit.svg\";\r\nimport OrderDetails from \"./OrderDetails\";\r\nimport OrderUpdate from \"./OrderUpdate\";\r\nimport PaymentStatusUpdate from \"./PaymentStatusUpdate\";\r\n\r\nconst Deliveries = () => {\r\n  const [deliveries, setDeliveires] = useState([]);\r\n  const [order, setOrder] = useState({});\r\n  const [orderActive, setOrderActive] = useState(\"\");\r\n  const [orderUpdateActive, setOrderUpdateActive] = useState(\"\");\r\n  const [orderUpdatePayment, setOrderUpdatePayment] = useState(\"\");\r\n\r\n  const { user, token } = isAuthenticated();\r\n\r\n  const loadDelivery = async (userId, token) => {\r\n    try {\r\n      const data = await getAllDeliveries(userId, token, \"all\");\r\n\r\n      if (data.error) {\r\n        return console.log(data.error);\r\n      } else {\r\n        return setDeliveires(data.Eorders);\r\n      }\r\n    } catch (error) {\r\n      return console.log(error);\r\n    }\r\n  };\r\n\r\n  const handlePreview = (order) => {\r\n    return setOrderActive(\"orderDetails\"), setOrder(order);\r\n  };\r\n\r\n  const handleEdit = (order) => {\r\n    return setOrderUpdateActive(\"orderUpdateActive\"), setOrder(order);\r\n  };\r\n\r\n  const handlePaymentStatus = (order) => {\r\n    return setOrderUpdatePayment(\"orderUpdatePayment\"), setOrder(order);\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadDelivery(user._id, token);\r\n  }, []);\r\n\r\n  return (\r\n    <section className=\"employeeBoard-section\">\r\n      <h1 className=\"employeeBoard-right-header\">Deliveries</h1>\r\n\r\n      <div className=\"employeeBoard-right-subsection\">\r\n        <table className=\"employeeBoard-right-table\">\r\n          <thead className=\"employeeBoard-right-table-head-sec\">\r\n            <tr>\r\n              <th className=\"employeeBoard-right-table-head-value\">Order ID</th>\r\n              <th className=\"employeeBoard-right-table-head-value\">Status</th>\r\n              <th className=\"employeeBoard-right-table-head-value\">Total</th>\r\n              <th className=\"employeeBoard-right-table-head-value\">\r\n                Payment Mode\r\n              </th>\r\n              <th className=\"employeeBoard-right-table-head-value\">\r\n                Payment Status\r\n              </th>\r\n              <th className=\"employeeBoard-right-table-head-value\">Address</th>\r\n              <th className=\"employeeBoard-right-table-head-value\">Action</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"employeeBoard-right-table-body-sec\">\r\n            {deliveries &&\r\n              deliveries.map((order, index) => {\r\n                return (\r\n                  <tr\r\n                    key={index}\r\n                    className=\"employeeBoard-right-table-body-tr \"\r\n                  >\r\n                    <td className=\"employeeBoard-right-table-body-value\">\r\n                      {order.EorderId._id}\r\n                    </td>\r\n                    <td className=\"employeeBoard-right-table-body-value\">\r\n                      <div\r\n                        className={`employeeBoard-right-table-body-div ${order.EorderId.Ostatus}`}\r\n                      >\r\n                        {order.EorderId.Ostatus}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"employeeBoard-right-table-body-value\">\r\n                      {order.EorderId.OtotalPrice}\r\n                    </td>\r\n                    <td className=\"employeeBoard-right-table-body-value\">\r\n                      {order.EorderId.OpaymentMode}\r\n                    </td>\r\n                    <td className=\"employeeBoard-right-table-body-value\">\r\n                        {order.EorderId.OpaymentStatus === \"Paid\" ? (\r\n                          order.EorderId.OpaymentStatus\r\n                        ) : (\r\n                          <button\r\n                            className=\"adminDashPanel-right-table-body-value-btn\"\r\n                            onClick={() => handlePaymentStatus(order.EorderId)}\r\n                          >\r\n                            Pending\r\n                          </button>\r\n                        )}\r\n                      </td>\r\n                    <td className=\"employeeBoard-right-table-body-value\">\r\n                      {order.EorderAddress.houseName}\r\n                      <br />\r\n                      {order.EorderAddress.streetName}\r\n                    </td>\r\n                    <td className=\"employeeBoard-right-table-body-value\">\r\n                      <button onClick={() => handlePreview(order)}>\r\n                        <img\r\n                          src={ViewIcon}\r\n                          alt=\"\"\r\n                          className=\"employeeBoard-right-table-icon vie\"\r\n                        />\r\n                      </button>\r\n                      <button onClick={() => handleEdit(order.EorderId)}>\r\n                        <img\r\n                          src={EditIcon}\r\n                          alt=\"\"\r\n                          className=\"employeeBoard-right-table-icon vie\"\r\n                        />\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {orderActive === \"orderDetails\" && (\r\n        <OrderDetails setOrderActive={setOrderActive} order={order} />\r\n      )}\r\n      {orderUpdateActive === \"orderUpdateActive\" && (\r\n        <OrderUpdate\r\n          setOrderUpdateActive={setOrderUpdateActive}\r\n          order={order}\r\n        />\r\n      )}\r\n      {orderUpdatePayment === \"orderUpdatePayment\" && (\r\n        <PaymentStatusUpdate\r\n          setOrderUpdatePayment={setOrderUpdatePayment}\r\n          order={order}\r\n        />\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Deliveries;\r\n"]},"metadata":{},"sourceType":"module"}