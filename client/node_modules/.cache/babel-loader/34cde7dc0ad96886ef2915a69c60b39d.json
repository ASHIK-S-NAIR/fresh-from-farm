{"ast":null,"code":"import _objectSpread from\"F:/mern/projects/greenbeans/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"F:/mern/projects/greenbeans/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"F:/mern/projects/greenbeans/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"F:\\\\mern\\\\projects\\\\greenbeans\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect}from\"react\";import ViewIcon from\"../icons/view.svg\";import EditIcon from\"../icons/Edit.svg\";import AddIcon from\"../icons/add.svg\";import TrashIcon from\"../icons/Trash.svg\";import{isAuthenticated}from\"../auth\";import{getAllProducts}from\"../core/helper/productDetailHelper\";import{API}from\"../backend\";import AddProduct from\"./AddProduct\";import ProductDetail from\"./ProductDetail\";import EditProduct from\"./EditProduct\";import DeleteProduct from\"./DeleteProduct\";import Cross from\"../icons/cross-black.svg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Product=function Product(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState(\"all\"),_useState4=_slicedToArray(_useState3,2),category=_useState4[0],setCategory=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),addProductActive=_useState6[0],setAddProductActive=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),editProductActive=_useState8[0],setEditProductActive=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),deleteProductActive=_useState10[0],setDeleteProductActive=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),productDetail=_useState12[0],setProductDetail=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),product=_useState14[0],setProduct=_useState14[1];var _useState15=useState({all:0,Fruit:0,Vegetable:0}),_useState16=_slicedToArray(_useState15,2),countValues=_useState16[0],setCountValues=_useState16[1];var _isAuthenticated=isAuthenticated(),user=_isAuthenticated.user,token=_isAuthenticated.token;var all=countValues.all,Fruit=countValues.Fruit,Vegetable=countValues.Vegetable;var loadProducts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(category){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getAllProducts(category);case 3:data=_context.sent;if(!data.error){_context.next=8;break;}return _context.abrupt(\"return\",console.log(data.error));case 8:return _context.abrupt(\"return\",setProducts(data));case 9:_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);return _context.abrupt(\"return\",console.log(_context.t0));case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function loadProducts(_x){return _ref.apply(this,arguments);};}();var filterBtn=function filterBtn(CategoryState,CategoryValue,CategoryBtnValue){return/*#__PURE__*/_jsxs(\"button\",{className:\"orders-filter-btn \".concat(category===CategoryState?\"active\":\"\"),onClick:function onClick(){return setCategory(CategoryState);},children:[CategoryBtnValue,\" \",/*#__PURE__*/_jsx(\"span\",{className:\"filter-btn-value\",children:CategoryValue})]});};var loadCountValues=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var products,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:products=[];_context2.prev=1;_context2.next=4;return getAllProducts(\"all\");case 4:data=_context2.sent;if(!data.error){_context2.next=9;break;}return _context2.abrupt(\"return\",console.log(data.error));case 9:products=data;case 10:_context2.next=15;break;case 12:_context2.prev=12;_context2.t0=_context2[\"catch\"](1);return _context2.abrupt(\"return\",console.log(_context2.t0));case 15:setCountValues(_objectSpread(_objectSpread({},countValues),{},{all:products.length,Fruit:products.filter(function(product){return product.pCategory===\"fruit\";}).length,Vegetable:products.filter(function(product){return product.pCategory===\"vegetable\";}).length}));case 16:case\"end\":return _context2.stop();}}},_callee2,null,[[1,12]]);}));return function loadCountValues(){return _ref2.apply(this,arguments);};}();// const loadMessage = () => {\n//   set\n// }\nvar handlePreview=function handlePreview(product){return setProductDetail(\"productDetail\"),setProduct(product);};var handleEdit=function handleEdit(product){return setEditProductActive(\"editProduct\"),setProduct(product);};var handleDelete=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(product){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:return _context3.abrupt(\"return\",(setDeleteProductActive(\"deleteProduct\"),setProduct(product)));case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function handleDelete(_x2){return _ref3.apply(this,arguments);};}();useEffect(function(){loadProducts(category);},[category,addProductActive,editProductActive]);useEffect(function(){loadCountValues();},[category,addProductActive,editProductActive]);return/*#__PURE__*/_jsxs(\"section\",{className:\"adminDashPanel-section product-section\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"adminDashPanel-right-header\",children:\"Products\"}),/*#__PURE__*/_jsx(\"div\",{className:\"adminDashPanel-right-subsection adminDashPanel-product-add-btn-subSection\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"adminDashPanel-product-add-btn\",onClick:function onClick(){return setAddProductActive(\"addProduct\");},children:[/*#__PURE__*/_jsx(\"img\",{src:AddIcon,className:\"adminDashPanel-product-add-btn-icon\",alt:\"\"}),\"ADD PRODUCT\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"adminDashPanel-right-subsection adminDashPanel-product-filter-subSection\",children:[filterBtn(\"all\",all,\"All\"),filterBtn(\"fruit\",Fruit,\"Fruit\"),filterBtn(\"vegetable\",Vegetable,\"Vegetable\")]}),/*#__PURE__*/_jsx(\"div\",{className:\"adminDashPanel-right-subsection\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"adminDashPanel-right-table\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"adminDashPanel-right-table-head-sec\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"adminDashPanel-right-table-head-value\",children:\"Product Image\"}),/*#__PURE__*/_jsx(\"th\",{className:\"adminDashPanel-right-table-head-value\",children:\"Product Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"adminDashPanel-right-table-head-value\",children:\"Product ID\"}),/*#__PURE__*/_jsx(\"th\",{className:\"adminDashPanel-right-table-head-value\",children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{className:\"adminDashPanel-right-table-head-value\",children:\"Category\"}),/*#__PURE__*/_jsx(\"th\",{className:\"adminDashPanel-right-table-head-value\",children:\"Stock\"}),/*#__PURE__*/_jsx(\"th\",{className:\"adminDashPanel-right-table-head-value\",children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{className:\"adminDashPanel-right-table-head-value\",children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"adminDashPanel-right-table-body-sec\",children:products&&products.map(function(product,index){return/*#__PURE__*/_jsxs(\"tr\",{className:\"adminDashPanel-right-table-body-tr\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"adminDashPanel-right-table-body-value\",children:/*#__PURE__*/_jsx(\"img\",{className:\"adminDashPanel-product-img\",src:\"\".concat(API,\"/product/photo/\").concat(product.pImg.key),alt:\"\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"adminDashPanel-right-table-body-value\",children:product.pName}),/*#__PURE__*/_jsx(\"td\",{className:\"adminDashPanel-right-table-body-value\",children:product._id}),/*#__PURE__*/_jsx(\"td\",{className:\"adminDashPanel-right-table-body-value\",children:product.pDescription}),/*#__PURE__*/_jsx(\"td\",{className:\"adminDashPanel-right-table-body-value\",children:product.pCategory}),/*#__PURE__*/_jsx(\"td\",{className:\"adminDashPanel-right-table-body-value\",children:product.pStock!==0?\"\".concat(product.pStock,\" Kg\"):\"Out of Stock\"}),/*#__PURE__*/_jsx(\"td\",{className:\"adminDashPanel-right-table-body-value\",children:product.pPrice}),/*#__PURE__*/_jsxs(\"td\",{className:\"adminDashPanel-right-table-body-value\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handlePreview(product);},children:/*#__PURE__*/_jsx(\"img\",{src:ViewIcon,alt:\"\",className:\"adminDashPanel-right-table-icon \"})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleEdit(product);},children:/*#__PURE__*/_jsx(\"img\",{src:EditIcon,alt:\"\",className:\"adminDashPanel-right-table-icon \"})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleDelete(product);},children:/*#__PURE__*/_jsx(\"img\",{src:TrashIcon,alt:\"\",className:\"adminDashPanel-right-table-icon \"})})]})]},index);})})]})}),addProductActive===\"addProduct\"&&/*#__PURE__*/_jsx(AddProduct,{setAddProductActive:setAddProductActive}),editProductActive===\"editProduct\"&&/*#__PURE__*/_jsx(EditProduct,{setEditProductActive:setEditProductActive,product:product}),deleteProductActive===\"deleteProduct\"&&/*#__PURE__*/_jsx(DeleteProduct,{setDeleteProductActive:setDeleteProductActive,product:product}),productDetail===\"productDetail\"&&/*#__PURE__*/_jsx(ProductDetail,{setProductDetail:setProductDetail,product:product})]});};export default Product;","map":{"version":3,"sources":["F:/mern/projects/greenbeans/client/src/admin/Product.js"],"names":["React","useState","useEffect","ViewIcon","EditIcon","AddIcon","TrashIcon","isAuthenticated","getAllProducts","API","AddProduct","ProductDetail","EditProduct","DeleteProduct","Cross","Product","products","setProducts","category","setCategory","addProductActive","setAddProductActive","editProductActive","setEditProductActive","deleteProductActive","setDeleteProductActive","productDetail","setProductDetail","product","setProduct","all","Fruit","Vegetable","countValues","setCountValues","user","token","loadProducts","data","error","console","log","filterBtn","CategoryState","CategoryValue","CategoryBtnValue","loadCountValues","length","filter","pCategory","handlePreview","handleEdit","handleDelete","map","index","pImg","key","pName","_id","pDescription","pStock","pPrice"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport ViewIcon from \"../icons/view.svg\";\r\nimport EditIcon from \"../icons/Edit.svg\";\r\nimport AddIcon from \"../icons/add.svg\";\r\nimport TrashIcon from \"../icons/Trash.svg\";\r\nimport { isAuthenticated } from \"../auth\";\r\nimport { getAllProducts } from \"../core/helper/productDetailHelper\";\r\nimport { API } from \"../backend\";\r\nimport AddProduct from \"./AddProduct\";\r\nimport ProductDetail from \"./ProductDetail\";\r\nimport EditProduct from \"./EditProduct\";\r\nimport DeleteProduct from \"./DeleteProduct\";\r\nimport Cross from \"../icons/cross-black.svg\";\r\n\r\nconst Product = () => {\r\n  const [products, setProducts] = useState([]);\r\n  const [category, setCategory] = useState(\"all\");\r\n  const [addProductActive, setAddProductActive] = useState(\"\");\r\n  const [editProductActive, setEditProductActive] = useState(\"\");\r\n  const [deleteProductActive, setDeleteProductActive] = useState(\"\");\r\n  const [productDetail, setProductDetail] = useState(\"\");\r\n  const [product, setProduct] = useState();\r\n  const [countValues, setCountValues] = useState({\r\n    all: 0,\r\n    Fruit: 0,\r\n    Vegetable: 0,\r\n  });\r\n\r\n  const { user, token } = isAuthenticated();\r\n\r\n  const { all, Fruit, Vegetable } = countValues;\r\n\r\n  const loadProducts = async (category) => {\r\n    try {\r\n      const data = await getAllProducts(category);\r\n      if (data.error) {\r\n        return console.log(data.error);\r\n      } else {\r\n        return setProducts(data);\r\n      }\r\n    } catch (error) {\r\n      return console.log(error);\r\n    }\r\n  };\r\n\r\n  const filterBtn = (CategoryState, CategoryValue, CategoryBtnValue) => {\r\n    return (\r\n      <button\r\n        className={`orders-filter-btn ${\r\n          category === CategoryState ? \"active\" : \"\"\r\n        }`}\r\n        onClick={() => setCategory(CategoryState)}\r\n      >\r\n        {CategoryBtnValue}{\" \"}\r\n        <span className=\"filter-btn-value\">{CategoryValue}</span>\r\n      </button>\r\n    );\r\n  };\r\n\r\n  const loadCountValues = async () => {\r\n    var products = [];\r\n    try {\r\n      const data = await getAllProducts(\"all\");\r\n      if (data.error) {\r\n        return console.log(data.error);\r\n      } else {\r\n        products = data;\r\n      }\r\n    } catch (error) {\r\n      return console.log(error);\r\n    }\r\n\r\n    setCountValues({\r\n      ...countValues,\r\n      all: products.length,\r\n      Fruit: products.filter((product) => product.pCategory === \"fruit\").length,\r\n      Vegetable: products.filter((product) => product.pCategory === \"vegetable\")\r\n        .length,\r\n    });\r\n  };\r\n\r\n  // const loadMessage = () => {\r\n  //   set\r\n  // }\r\n\r\n  const handlePreview = (product) => {\r\n    return setProductDetail(\"productDetail\"), setProduct(product);\r\n  };\r\n  const handleEdit = (product) => {\r\n    return setEditProductActive(\"editProduct\"), setProduct(product);\r\n  };\r\n  const handleDelete = async (product) => {\r\n    return setDeleteProductActive(\"deleteProduct\"), setProduct(product);\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadProducts(category);\r\n  }, [category, addProductActive, editProductActive]);\r\n\r\n  useEffect(() => {\r\n    loadCountValues();\r\n  }, [category, addProductActive, editProductActive]);\r\n\r\n  return (\r\n    <section className=\"adminDashPanel-section product-section\">\r\n      {/* <div className=\"adminDashPanel-right-delete-Message-sec\">\r\n        <p className=\"adminDashPanel-right-delete-Message\">\r\n          Product Product Name - 99999999999999 was successfully deleted\r\n        </p>\r\n        <div className=\"cross-sec\">\r\n          <img src={Cross} alt=\"\" className=\"cross-img\" />\r\n        </div>\r\n      </div> */}\r\n      <h1 className=\"adminDashPanel-right-header\">Products</h1>\r\n      <div className=\"adminDashPanel-right-subsection adminDashPanel-product-add-btn-subSection\">\r\n        <button\r\n          className=\"adminDashPanel-product-add-btn\"\r\n          onClick={() => setAddProductActive(\"addProduct\")}\r\n        >\r\n          <img\r\n            src={AddIcon}\r\n            className=\"adminDashPanel-product-add-btn-icon\"\r\n            alt=\"\"\r\n          />\r\n          ADD PRODUCT\r\n        </button>\r\n      </div>\r\n      <div className=\"adminDashPanel-right-subsection adminDashPanel-product-filter-subSection\">\r\n        {filterBtn(\"all\", all, \"All\")}\r\n        {filterBtn(\"fruit\", Fruit, \"Fruit\")}\r\n        {filterBtn(\"vegetable\", Vegetable, \"Vegetable\")}\r\n      </div>\r\n      <div className=\"adminDashPanel-right-subsection\">\r\n        <table className=\"adminDashPanel-right-table\">\r\n          <thead className=\"adminDashPanel-right-table-head-sec\">\r\n            <tr>\r\n              <th className=\"adminDashPanel-right-table-head-value\">\r\n                Product Image\r\n              </th>\r\n              <th className=\"adminDashPanel-right-table-head-value\">\r\n                Product Name\r\n              </th>\r\n              <th className=\"adminDashPanel-right-table-head-value\">\r\n                Product ID\r\n              </th>\r\n              <th className=\"adminDashPanel-right-table-head-value\">\r\n                Description\r\n              </th>\r\n\r\n              <th className=\"adminDashPanel-right-table-head-value\">\r\n                Category\r\n              </th>\r\n\r\n              <th className=\"adminDashPanel-right-table-head-value\">Stock</th>\r\n              <th className=\"adminDashPanel-right-table-head-value\">Price</th>\r\n              <th className=\"adminDashPanel-right-table-head-value\">Action</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"adminDashPanel-right-table-body-sec\">\r\n            {products &&\r\n              products.map((product, index) => {\r\n                return (\r\n                  <tr\r\n                    key={index}\r\n                    className=\"adminDashPanel-right-table-body-tr\"\r\n                  >\r\n                    <td className=\"adminDashPanel-right-table-body-value\">\r\n                      <img\r\n                        className=\"adminDashPanel-product-img\"\r\n                        src={`${API}/product/photo/${product.pImg.key}`}\r\n                        alt=\"\"\r\n                      />\r\n                    </td>\r\n                    <td className=\"adminDashPanel-right-table-body-value\">\r\n                      {product.pName}\r\n                    </td>\r\n                    <td className=\"adminDashPanel-right-table-body-value\">\r\n                      {product._id}\r\n                    </td>\r\n                    <td className=\"adminDashPanel-right-table-body-value\">\r\n                      {product.pDescription}\r\n                    </td>\r\n                    <td className=\"adminDashPanel-right-table-body-value\">\r\n                      {product.pCategory}\r\n                    </td>\r\n                    <td className=\"adminDashPanel-right-table-body-value\">\r\n                      {product.pStock !== 0\r\n                        ? `${product.pStock} Kg`\r\n                        : \"Out of Stock\"}\r\n                    </td>\r\n\r\n                    <td className=\"adminDashPanel-right-table-body-value\">\r\n                      {product.pPrice}\r\n                    </td>\r\n                    {/* <td className=\"adminDashPanel-right-table-body-value\">\r\n                      {moment(product.createdAt).format(\"DD-MMM-yyyy\")}\r\n                    </td>\r\n                    <td className=\"adminDashPanel-right-table-body-value\">\r\n                      {moment(product.updatedAt).format(\"DD-MMM-yyyy\")}\r\n                    </td> */}\r\n                    <td className=\"adminDashPanel-right-table-body-value\">\r\n                      <button onClick={() => handlePreview(product)}>\r\n                        <img\r\n                          src={ViewIcon}\r\n                          alt=\"\"\r\n                          className=\"adminDashPanel-right-table-icon \"\r\n                        />\r\n                      </button>\r\n                      <button onClick={() => handleEdit(product)}>\r\n                        <img\r\n                          src={EditIcon}\r\n                          alt=\"\"\r\n                          className=\"adminDashPanel-right-table-icon \"\r\n                        />\r\n                      </button>\r\n                      <button onClick={() => handleDelete(product)}>\r\n                        <img\r\n                          src={TrashIcon}\r\n                          alt=\"\"\r\n                          className=\"adminDashPanel-right-table-icon \"\r\n                        />\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {addProductActive === \"addProduct\" && (\r\n        <AddProduct setAddProductActive={setAddProductActive} />\r\n      )}\r\n      {editProductActive === \"editProduct\" && (\r\n        <EditProduct\r\n          setEditProductActive={setEditProductActive}\r\n          product={product}\r\n        />\r\n      )}\r\n      {deleteProductActive === \"deleteProduct\" && (\r\n        <DeleteProduct\r\n          setDeleteProductActive={setDeleteProductActive}\r\n          product={product}\r\n        />\r\n      )}\r\n      {productDetail === \"productDetail\" && (\r\n        <ProductDetail setProductDetail={setProductDetail} product={product} />\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Product;\r\n"]},"metadata":{},"sourceType":"module"}