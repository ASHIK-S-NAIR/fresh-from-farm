{"ast":null,"code":"import _objectSpread from\"F:/mern/projects/greenbeans/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"F:/mern/projects/greenbeans/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"F:/mern/projects/greenbeans/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"F:\\\\mern\\\\projects\\\\greenbeans\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect}from\"react\";// import moment from \"moment\";\nimport CartIcon from\"../icons/cart.svg\";import ProductIcon from\"../icons/product.svg\";import EmployerIcon from\"../icons/employer.svg\";import ViewIcon from\"../icons/view.svg\";import EditIcon from\"../icons/Edit.svg\";import{isAuthenticated}from\"../auth\";import{getAllDeliveries,getCountDeliveries,getCountNewDeliveries,getEmployeeStatus}from\"../user\";import OrderDetails from\"./OrderDetails\";import OrderUpdate from\"./OrderUpdate\";import PaymentStatusUpdate from\"./PaymentStatusUpdate\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Dashboard=function Dashboard(){var _useState=useState({totalDeliveries:\"\",NewDeliveries:\"\",EmployeeStatus:\"\"}),_useState2=_slicedToArray(_useState,2),statusValues=_useState2[0],setStatusValues=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),newDeliveries=_useState4[0],setNewDeliveires=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),order=_useState6[0],setOrder=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),orderActive=_useState8[0],setOrderActive=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),orderUpdateActive=_useState10[0],setOrderUpdateActive=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),orderUpdatePayment=_useState12[0],setOrderUpdatePayment=_useState12[1];var totalDeliveries=statusValues.totalDeliveries,NewDeliveries=statusValues.NewDeliveries,EmployeeStatus=statusValues.EmployeeStatus;var _isAuthenticated=isAuthenticated(),user=_isAuthenticated.user,token=_isAuthenticated.token;var loadStatusValues=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userId,token){var _totalDeliveries,_NewDeliveries,_EmployeeStatus;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getCountDeliveries(userId,token);case 3:_totalDeliveries=_context.sent;_context.next=6;return getCountNewDeliveries(userId,token);case 6:_NewDeliveries=_context.sent;_context.next=9;return getEmployeeStatus(userId,token);case 9:_EmployeeStatus=_context.sent;if(!(_totalDeliveries.error||_NewDeliveries.error||_EmployeeStatus.error)){_context.next=14;break;}return _context.abrupt(\"return\",console.log(\"status update error occured\"));case 14:return _context.abrupt(\"return\",setStatusValues(_objectSpread(_objectSpread({},statusValues),{},{totalDeliveries:_totalDeliveries,NewDeliveries:_NewDeliveries,EmployeeStatus:_EmployeeStatus})));case 15:_context.next=20;break;case 17:_context.prev=17;_context.t0=_context[\"catch\"](0);return _context.abrupt(\"return\",console.log(_context.t0));case 20:case\"end\":return _context.stop();}}},_callee,null,[[0,17]]);}));return function loadStatusValues(_x,_x2){return _ref.apply(this,arguments);};}();var loadNewDelivery=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(userId,token){var data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return getAllDeliveries(userId,token,\"pending\");case 3:data=_context2.sent;if(!data.error){_context2.next=8;break;}return _context2.abrupt(\"return\",console.log(data.error));case 8:return _context2.abrupt(\"return\",setNewDeliveires(data.Eorders));case 9:_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](0);return _context2.abrupt(\"return\",console.log(_context2.t0));case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[0,11]]);}));return function loadNewDelivery(_x3,_x4){return _ref2.apply(this,arguments);};}();var handlePreview=function handlePreview(order){return setOrderActive(\"orderDetails\"),setOrder(order);};var handleEdit=function handleEdit(order){return setOrderUpdateActive(\"orderUpdateActive\"),setOrder(order);};var handlePaymentStatus=function handlePaymentStatus(order){return setOrderUpdatePayment(\"orderUpdatePayment\"),setOrder(order);};useEffect(function(){loadNewDelivery(user._id,token);},[orderUpdateActive,orderUpdatePayment]);useEffect(function(){loadStatusValues(user._id,token);},[orderUpdateActive,orderUpdatePayment]);return/*#__PURE__*/_jsxs(\"section\",{className:\"employeeBoard-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"-right-subsection dashboard-subSection\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"employeeBoard-dashboard-status-sec dashboard-status-sec-TotalDeliveries\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"adminDashPanel-dashboard-status-left\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"dashboard-status-tag\",children:\"Orders\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"dashboard-status-value\",children:totalDeliveries})]}),/*#__PURE__*/_jsx(\"div\",{className:\"adminDashPanel-dashboard-status-right\",children:/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-status-img-sec\",children:/*#__PURE__*/_jsx(\"img\",{src:CartIcon,alt:\"\",className:\"dashboard-status-img\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"employeeBoard-dashboard-status-sec dashboard-status-sec-DeliveryStatus\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"adminDashPanel-dashboard-status-left\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"dashboard-status-tag\",children:\"Products\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"dashboard-status-value\",children:NewDeliveries})]}),/*#__PURE__*/_jsx(\"div\",{className:\"adminDashPanel-dashboard-status-right\",children:/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-status-img-sec\",children:/*#__PURE__*/_jsx(\"img\",{src:ProductIcon,alt:\"\",className:\"dashboard-status-img\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"employeeBoard-dashboard-status-sec dashboard-status-sec-EmpoyeeStatus\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"adminDashPanel-dashboard-status-left\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"dashboard-status-tag\",children:\"Employers\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"dashboard-status-value\",children:EmployeeStatus})]}),/*#__PURE__*/_jsx(\"div\",{className:\"adminDashPanel-dashboard-status-right\",children:/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-status-img-sec\",children:/*#__PURE__*/_jsx(\"img\",{src:EmployerIcon,alt:\"\",className:\"dashboard-status-img\"})})})]})]}),/*#__PURE__*/_jsx(\"h1\",{className:\"employeeBoard-right-header\",children:\"New Delivery\"}),/*#__PURE__*/_jsx(\"div\",{className:\"employeeBoard-right-subsection\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"employeeBoard-right-table\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"employeeBoard-right-table-head-sec\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"employeeBoard-right-table-head-value\",children:\"Order ID\"}),/*#__PURE__*/_jsx(\"th\",{className:\"employeeBoard-right-table-head-value\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"employeeBoard-right-table-head-value\",children:\"Total\"}),/*#__PURE__*/_jsx(\"th\",{className:\"employeeBoard-right-table-head-value\",children:\"Payment Mode\"}),/*#__PURE__*/_jsx(\"th\",{className:\"employeeBoard-right-table-head-value\",children:\"Payment Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"employeeBoard-right-table-head-value\",children:\"Address\"}),/*#__PURE__*/_jsx(\"th\",{className:\"employeeBoard-right-table-head-value\",children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"employeeBoard-right-table-body-sec\",children:newDeliveries&&newDeliveries.map(function(order,index){return order.EorderId.Ostatus!==(\"Delivered\"||\"Cancelled\")&&/*#__PURE__*/_jsxs(\"tr\",{className:\"employeeBoard-right-table-body-tr \",children:[/*#__PURE__*/_jsx(\"td\",{className:\"employeeBoard-right-table-body-value\",children:order.EorderId._id}),/*#__PURE__*/_jsx(\"td\",{className:\"employeeBoard-right-table-body-value\",children:/*#__PURE__*/_jsx(\"div\",{className:\"employeeBoard-right-table-body-div \".concat(order.EorderId.Ostatus),children:order.EorderId.Ostatus})}),/*#__PURE__*/_jsx(\"td\",{className:\"employeeBoard-right-table-body-value\",children:order.EorderId.OtotalPrice}),/*#__PURE__*/_jsx(\"td\",{className:\"employeeBoard-right-table-body-value\",children:order.EorderId.OpaymentMode}),/*#__PURE__*/_jsx(\"td\",{className:\"employeeBoard-right-table-body-value\",children:order.EorderId.OpaymentStatus===\"Paid\"?order.EorderId.OpaymentStatus:/*#__PURE__*/_jsx(\"button\",{className:\"adminDashPanel-right-table-body-value-btn\",onClick:function onClick(){return handlePaymentStatus(order.EorderId);},children:\"Pending\"})}),/*#__PURE__*/_jsxs(\"td\",{className:\"employeeBoard-right-table-body-value\",children:[order.EorderAddress.houseName,/*#__PURE__*/_jsx(\"br\",{}),order.EorderAddress.streetName]}),/*#__PURE__*/_jsxs(\"td\",{className:\"employeeBoard-right-table-body-value\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handlePreview(order);},children:/*#__PURE__*/_jsx(\"img\",{src:ViewIcon,alt:\"\",className:\"employeeBoard-right-table-icon vie\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleEdit(order.EorderId);},children:/*#__PURE__*/_jsx(\"img\",{src:EditIcon,alt:\"\",className:\"employeeBoard-right-table-icon vie\"})})]})]},index);})})]})}),orderActive===\"orderDetails\"&&/*#__PURE__*/_jsx(OrderDetails,{setOrderActive:setOrderActive,order:order}),orderUpdateActive===\"orderUpdateActive\"&&/*#__PURE__*/_jsx(OrderUpdate,{setOrderUpdateActive:setOrderUpdateActive,order:order}),orderUpdatePayment===\"orderUpdatePayment\"&&/*#__PURE__*/_jsx(PaymentStatusUpdate,{setOrderUpdatePayment:setOrderUpdatePayment,order:order})]});};export default Dashboard;","map":{"version":3,"sources":["F:/mern/projects/greenbeans/client/src/employee/Dashboard.js"],"names":["React","useState","useEffect","CartIcon","ProductIcon","EmployerIcon","ViewIcon","EditIcon","isAuthenticated","getAllDeliveries","getCountDeliveries","getCountNewDeliveries","getEmployeeStatus","OrderDetails","OrderUpdate","PaymentStatusUpdate","Dashboard","totalDeliveries","NewDeliveries","EmployeeStatus","statusValues","setStatusValues","newDeliveries","setNewDeliveires","order","setOrder","orderActive","setOrderActive","orderUpdateActive","setOrderUpdateActive","orderUpdatePayment","setOrderUpdatePayment","user","token","loadStatusValues","userId","error","console","log","loadNewDelivery","data","Eorders","handlePreview","handleEdit","handlePaymentStatus","_id","map","index","EorderId","Ostatus","OtotalPrice","OpaymentMode","OpaymentStatus","EorderAddress","houseName","streetName"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n// import moment from \"moment\";\r\nimport CartIcon from \"../icons/cart.svg\";\r\nimport ProductIcon from \"../icons/product.svg\";\r\nimport EmployerIcon from \"../icons/employer.svg\";\r\nimport ViewIcon from \"../icons/view.svg\";\r\nimport EditIcon from \"../icons/Edit.svg\";\r\nimport { isAuthenticated } from \"../auth\";\r\nimport {\r\n  getAllDeliveries,\r\n  getCountDeliveries,\r\n  getCountNewDeliveries,\r\n  getEmployeeStatus,\r\n} from \"../user\";\r\nimport OrderDetails from \"./OrderDetails\";\r\nimport OrderUpdate from \"./OrderUpdate\";\r\nimport PaymentStatusUpdate from \"./PaymentStatusUpdate\";\r\n\r\nconst Dashboard = () => {\r\n  const [statusValues, setStatusValues] = useState({\r\n    totalDeliveries: \"\",\r\n    NewDeliveries: \"\",\r\n    EmployeeStatus: \"\",\r\n  });\r\n  const [newDeliveries, setNewDeliveires] = useState([]);\r\n  const [order, setOrder] = useState({});\r\n  const [orderActive, setOrderActive] = useState(\"\");\r\n  const [orderUpdateActive, setOrderUpdateActive] = useState(\"\");\r\n  const [orderUpdatePayment, setOrderUpdatePayment] = useState(\"\");\r\n\r\n  const { totalDeliveries, NewDeliveries, EmployeeStatus } = statusValues;\r\n\r\n  const { user, token } = isAuthenticated();\r\n\r\n  const loadStatusValues = async (userId, token) => {\r\n    try {\r\n      const totalDeliveries = await getCountDeliveries(userId, token);\r\n      const NewDeliveries = await getCountNewDeliveries(userId, token);\r\n      const EmployeeStatus = await getEmployeeStatus(userId, token);\r\n\r\n      if (\r\n        totalDeliveries.error ||\r\n        NewDeliveries.error ||\r\n        EmployeeStatus.error\r\n      ) {\r\n        return console.log(\"status update error occured\");\r\n      } else {\r\n        return setStatusValues({\r\n          ...statusValues,\r\n          totalDeliveries: totalDeliveries,\r\n          NewDeliveries: NewDeliveries,\r\n          EmployeeStatus: EmployeeStatus,\r\n        });\r\n      }\r\n    } catch (error) {\r\n      return console.log(error);\r\n    }\r\n  };\r\n\r\n  const loadNewDelivery = async (userId, token) => {\r\n    try {\r\n      const data = await getAllDeliveries(userId, token, \"pending\");\r\n      if (data.error) {\r\n        return console.log(data.error);\r\n      } else {\r\n        return setNewDeliveires(data.Eorders);\r\n      }\r\n    } catch (error) {\r\n      return console.log(error);\r\n    }\r\n  };\r\n\r\n  const handlePreview = (order) => {\r\n    return setOrderActive(\"orderDetails\"), setOrder(order);\r\n  };\r\n\r\n  const handleEdit = (order) => {\r\n    return setOrderUpdateActive(\"orderUpdateActive\"), setOrder(order);\r\n  };\r\n\r\n  const handlePaymentStatus = (order) => {\r\n    return setOrderUpdatePayment(\"orderUpdatePayment\"), setOrder(order);\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadNewDelivery(user._id, token);\r\n  }, [orderUpdateActive, orderUpdatePayment]);\r\n\r\n  useEffect(() => {\r\n    loadStatusValues(user._id, token);\r\n  }, [orderUpdateActive, orderUpdatePayment]);\r\n\r\n  return (\r\n    <section className=\"employeeBoard-section\">\r\n      <div className=\"-right-subsection dashboard-subSection\">\r\n        {/* <div className=\"employeeBoard-dashboard-status-sec dashboard-status-sec-TotalDeliveries\">\r\n          <p className=\"dashboard-status-tag\">Total Deliveries</p>\r\n          <h1 className=\"dashboard-status-value\">{totalDeliveries}</h1>\r\n          <img src={CartIcon} alt=\"\" className=\"dashboard-status-img\" />\r\n        </div>\r\n        <div className=\"employeeBoard-dashboard-status-sec dashboard-status-sec-DeliveryStatus\">\r\n          <p className=\"dashboard-status-tag\">New Deliveries</p>\r\n          <h1 className=\"dashboard-status-value\">{NewDeliveries}</h1>\r\n          <img src={ProductIcon} alt=\"\" className=\"dashboard-status-img\" />\r\n        </div>\r\n        <div className=\"employeeBoard-dashboard-status-sec dashboard-status-sec-EmpoyeeStatus\">\r\n          <p className=\"dashboard-status-tag\">My Status</p>\r\n          <h1 className=\"dashboard-status-value\">{EmployeeStatus}</h1>\r\n          <img src={EmployerIcon} alt=\"\" className=\"dashboard-status-img\" />\r\n        </div> */}\r\n\r\n        <div className=\"employeeBoard-dashboard-status-sec dashboard-status-sec-TotalDeliveries\">\r\n          <div className=\"adminDashPanel-dashboard-status-left\">\r\n            <p className=\"dashboard-status-tag\">Orders</p>\r\n            <h1 className=\"dashboard-status-value\">{totalDeliveries}</h1>\r\n            {/* <p className=\"dashboard-status-comment dashboard-status-comment-orders\">\r\n              {orderCommentValue} orders\r\n              not delivered\r\n            </p> */}\r\n          </div>\r\n          <div className=\"adminDashPanel-dashboard-status-right\">\r\n            <div className=\"dashboard-status-img-sec\">\r\n              <img src={CartIcon} alt=\"\" className=\"dashboard-status-img\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"employeeBoard-dashboard-status-sec dashboard-status-sec-DeliveryStatus\">\r\n          <div className=\"adminDashPanel-dashboard-status-left\">\r\n            <p className=\"dashboard-status-tag\">Products</p>\r\n            <h1 className=\"dashboard-status-value\">{NewDeliveries}</h1>\r\n            {/* <p className=\"dashboard-status-comment dashboard-status-comment-products\">\r\n              {productCommentValue} products out of Stock\r\n            </p> */}\r\n          </div>\r\n          <div className=\"adminDashPanel-dashboard-status-right\">\r\n            <div className=\"dashboard-status-img-sec\">\r\n              <img src={ProductIcon} alt=\"\" className=\"dashboard-status-img\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"employeeBoard-dashboard-status-sec dashboard-status-sec-EmpoyeeStatus\">\r\n          <div className=\"adminDashPanel-dashboard-status-left\">\r\n            <p className=\"dashboard-status-tag\">Employers</p>\r\n            <h1 className=\"dashboard-status-value\">{EmployeeStatus}</h1>\r\n            {/* <p className=\"dashboard-status-comment dashboard-status-comment-employers\">\r\n              {employeeCommentValue} Employees available\r\n            </p> */}\r\n          </div>\r\n          <div className=\"adminDashPanel-dashboard-status-right\">\r\n            <div className=\"dashboard-status-img-sec\">\r\n              <img src={EmployerIcon} alt=\"\" className=\"dashboard-status-img\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n \r\n\r\n        {/* <div className=\"adminDashPanel-dashboard-status-sec dashboard-status-sec-customers\">\r\n          <div className=\"adminDashPanel-dashboard-status-left\">\r\n            <p className=\"dashboard-status-tag\">Customers</p>\r\n\r\n            <h1 className=\"dashboard-status-value\">{customerStatus}</h1>\r\n            <p className=\"dashboard-status-comment dashboard-status-comment-customers\">\r\n              {customerCommentValue} Customer order pending\r\n            </p>\r\n          </div>\r\n          <div className=\"adminDashPanel-dashboard-status-right\">\r\n            <div className=\"dashboard-status-img-sec\">\r\n              <img src={CustomerIcon} alt=\"\" className=\"dashboard-status-img\" />\r\n            </div>\r\n          </div>\r\n        </div> */}\r\n      </div>\r\n\r\n      <h1 className=\"employeeBoard-right-header\">New Delivery</h1>\r\n\r\n      <div className=\"employeeBoard-right-subsection\">\r\n        <table className=\"employeeBoard-right-table\">\r\n          <thead className=\"employeeBoard-right-table-head-sec\">\r\n            <tr>\r\n              <th className=\"employeeBoard-right-table-head-value\">Order ID</th>\r\n              <th className=\"employeeBoard-right-table-head-value\">Status</th>\r\n              <th className=\"employeeBoard-right-table-head-value\">Total</th>\r\n              <th className=\"employeeBoard-right-table-head-value\">\r\n                Payment Mode\r\n              </th>\r\n              <th className=\"employeeBoard-right-table-head-value\">\r\n                Payment Status\r\n              </th>\r\n              <th className=\"employeeBoard-right-table-head-value\">Address</th>\r\n              <th className=\"employeeBoard-right-table-head-value\">Action</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"employeeBoard-right-table-body-sec\">\r\n            {newDeliveries &&\r\n              newDeliveries.map((order, index) => {\r\n                return (\r\n                  order.EorderId.Ostatus !== (\"Delivered\" || \"Cancelled\") && (\r\n                    <tr\r\n                      key={index}\r\n                      className=\"employeeBoard-right-table-body-tr \"\r\n                    >\r\n                      <td className=\"employeeBoard-right-table-body-value\">\r\n                        {order.EorderId._id}\r\n                      </td>\r\n                      <td className=\"employeeBoard-right-table-body-value\">\r\n                        <div\r\n                          className={`employeeBoard-right-table-body-div ${order.EorderId.Ostatus}`}\r\n                        >\r\n                          {order.EorderId.Ostatus}\r\n                        </div>\r\n                      </td>\r\n                      <td className=\"employeeBoard-right-table-body-value\">\r\n                        {order.EorderId.OtotalPrice}\r\n                      </td>\r\n                      <td className=\"employeeBoard-right-table-body-value\">\r\n                        {order.EorderId.OpaymentMode}\r\n                      </td>\r\n                      <td className=\"employeeBoard-right-table-body-value\">\r\n                        {order.EorderId.OpaymentStatus === \"Paid\" ? (\r\n                          order.EorderId.OpaymentStatus\r\n                        ) : (\r\n                          <button\r\n                            className=\"adminDashPanel-right-table-body-value-btn\"\r\n                            onClick={() => handlePaymentStatus(order.EorderId)}\r\n                          >\r\n                            Pending\r\n                          </button>\r\n                        )}\r\n                      </td>\r\n                      <td className=\"employeeBoard-right-table-body-value\">\r\n                        {order.EorderAddress.houseName}\r\n                        <br />\r\n                        {order.EorderAddress.streetName}\r\n                      </td>\r\n                      <td className=\"employeeBoard-right-table-body-value\">\r\n                        <button onClick={() => handlePreview(order)}>\r\n                          <img\r\n                            src={ViewIcon}\r\n                            alt=\"\"\r\n                            className=\"employeeBoard-right-table-icon vie\"\r\n                          />\r\n                        </button>\r\n                        <button onClick={() => handleEdit(order.EorderId)}>\r\n                          <img\r\n                            src={EditIcon}\r\n                            alt=\"\"\r\n                            className=\"employeeBoard-right-table-icon vie\"\r\n                          />\r\n                        </button>\r\n                      </td>\r\n                    </tr>\r\n                  )\r\n                );\r\n              })}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n      {orderActive === \"orderDetails\" && (\r\n        <OrderDetails setOrderActive={setOrderActive} order={order} />\r\n      )}\r\n      {orderUpdateActive === \"orderUpdateActive\" && (\r\n        <OrderUpdate\r\n          setOrderUpdateActive={setOrderUpdateActive}\r\n          order={order}\r\n        />\r\n      )}\r\n      {orderUpdatePayment === \"orderUpdatePayment\" && (\r\n        <PaymentStatusUpdate\r\n          setOrderUpdatePayment={setOrderUpdatePayment}\r\n          order={order}\r\n        />\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n"]},"metadata":{},"sourceType":"module"}