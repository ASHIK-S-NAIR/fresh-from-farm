{"ast":null,"code":"import _objectSpread from\"F:/mern/projects/greenbeans/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"F:/mern/projects/greenbeans/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"F:/mern/projects/greenbeans/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"F:\\\\mern\\\\projects\\\\greenbeans\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect}from\"react\";import ViewIcon from\"../icons/view.svg\";import TrashIcon from\"../icons/Trash.svg\";import AddIcon from\"../icons/add.svg\";import{isAuthenticated}from\"../auth\";import{deleteEmployee,getEmployees}from\"../user\";import moment from\"moment\";import AddEmployee from\"./AddEmployee\";import EmployeeDetail from\"./EmployeeDetail\";import DeleteEmployee from\"./DeleteEmployee\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Employee=function Employee(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),employees=_useState2[0],setEmployees=_useState2[1];var _useState3=useState(\"all\"),_useState4=_slicedToArray(_useState3,2),status=_useState4[0],setStatus=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),employee=_useState6[0],setEmployee=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),addEmployeeActive=_useState8[0],setAddEmployeeActive=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),deleteEmployeeActive=_useState10[0],setDeleteEmployeeActive=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),employeeDetail=_useState12[0],setEmployeeDetail=_useState12[1];var _useState13=useState({all:0,Available:0,NotAvailable:0,OnDuty:0}),_useState14=_slicedToArray(_useState13,2),countValues=_useState14[0],setCountValues=_useState14[1];var _isAuthenticated=isAuthenticated(),user=_isAuthenticated.user,token=_isAuthenticated.token;var all=countValues.all,Available=countValues.Available,NotAvailable=countValues.NotAvailable,OnDuty=countValues.OnDuty;var loadEmployees=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userId,token,status){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getEmployees(userId,token,status);case 3:data=_context.sent;if(!data.error){_context.next=8;break;}return _context.abrupt(\"return\",console.log(data.error));case 8:return _context.abrupt(\"return\",setEmployees(data));case 9:_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);return _context.abrupt(\"return\",console.log(_context.t0));case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function loadEmployees(_x,_x2,_x3){return _ref.apply(this,arguments);};}();var filterBtn=function filterBtn(statusState,statusValue,statusBtnValue){return/*#__PURE__*/_jsxs(\"button\",{className:\"orders-filter-btn \".concat(status===statusState?\"active\":\"\"),onClick:function onClick(){return setStatus(statusState);},children:[statusBtnValue,\" \",/*#__PURE__*/_jsx(\"span\",{className:\"filter-btn-value\",children:statusValue})]});};var loadCountValues=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(userId,token){var employees,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:employees=[];_context2.prev=1;_context2.next=4;return getEmployees(userId,token,\"all\");case 4:data=_context2.sent;if(!data.error){_context2.next=9;break;}return _context2.abrupt(\"return\",console.log(data.error));case 9:employees=data;case 10:_context2.next=15;break;case 12:_context2.prev=12;_context2.t0=_context2[\"catch\"](1);return _context2.abrupt(\"return\",console.log(_context2.t0));case 15:setCountValues(_objectSpread(_objectSpread({},countValues),{},{all:employees.length,Available:employees.filter(function(employee){return employee.Estatus===\"Available\";}).length,NotAvailable:employees.filter(function(employee){return employee.Estatus===\"NotAvailable\";}).length,OnDuty:employees.filter(function(employee){return employee.Estatus===\"OnDuty\";}).length}));case 16:case\"end\":return _context2.stop();}}},_callee2,null,[[1,12]]);}));return function loadCountValues(_x4,_x5){return _ref2.apply(this,arguments);};}();var handlePreview=function handlePreview(employee){return setEmployeeDetail(\"employeeDetail\"),setEmployee(employee);};var handleDelete=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(employee){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:return _context3.abrupt(\"return\",(setDeleteEmployeeActive(\"deleteEmployee\"),setEmployee(employee)));case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function handleDelete(_x6){return _ref3.apply(this,arguments);};}();useEffect(function(){loadEmployees(user._id,token,status);},[status,addEmployeeActive]);useEffect(function(){loadCountValues(user._id,token);},[status,addEmployeeActive]);return/*#__PURE__*/_jsxs(\"section\",{className:\"adminDashPanel-section employee-section\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"adminDashPanel-right-header\",children:\"Employees\"}),/*#__PURE__*/_jsx(\"div\",{className:\"adminDashPanel-right-subsection adminDashPanel-product-add-btn-subSection\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"adminDashPanel-product-add-btn\",onClick:function onClick(){return setAddEmployeeActive(\"addEmployee\");},children:[/*#__PURE__*/_jsx(\"img\",{src:AddIcon,className:\"adminDashPanel-product-add-btn-icon\",alt:\"\"}),\"ADD EMPLOYEE\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"adminDashPanel-right-subsection adminDashPanel-product-filter-subSection\",children:[filterBtn(\"all\",all,\"All\"),filterBtn(\"Available\",Available,\"Available\"),filterBtn(\"NotAvailable\",NotAvailable,\"NotAvailable\"),filterBtn(\"OnDuty\",OnDuty,\"On-Duty\")]}),/*#__PURE__*/_jsx(\"div\",{className:\"adminDashPanel-right-subsection\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"adminDashPanel-right-table\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"adminDashPanel-right-table-head-sec\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"adminDashPanel-right-table-head-value\",children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"adminDashPanel-right-table-head-value\",children:\"Employee ID\"}),/*#__PURE__*/_jsx(\"th\",{className:\"adminDashPanel-right-table-head-value\",children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{className:\"adminDashPanel-right-table-head-value\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"adminDashPanel-right-table-head-value\",children:\"Phone Number\"}),/*#__PURE__*/_jsx(\"th\",{className:\"adminDashPanel-right-table-head-value\",children:\"Address\"}),/*#__PURE__*/_jsx(\"th\",{className:\"adminDashPanel-right-table-head-value\",children:\"Created At\"}),/*#__PURE__*/_jsx(\"th\",{className:\"adminDashPanel-right-table-head-value\",children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"adminDashPanel-right-table-body-sec\",children:employees&&employees.map(function(employee,index){return/*#__PURE__*/_jsxs(\"tr\",{className:\"adminDashPanel-right-table-body-tr\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"adminDashPanel-right-table-body-value\",children:employee.Euser.name}),/*#__PURE__*/_jsx(\"td\",{className:\"adminDashPanel-right-table-body-value\",children:employee._id}),/*#__PURE__*/_jsx(\"td\",{className:\"adminDashPanel-right-table-body-value\",children:employee.Euser.email}),/*#__PURE__*/_jsx(\"td\",{className:\"adminDashPanel-right-table-body-value\",children:employee.Estatus}),/*#__PURE__*/_jsx(\"td\",{className:\"adminDashPanel-right-table-body-value\",children:employee.Euser.phoneNumber}),/*#__PURE__*/_jsxs(\"td\",{className:\"adminDashPanel-right-table-body-value\",children:[employee.Euser.address.houseName,/*#__PURE__*/_jsx(\"br\",{}),employee.Euser.address.streetName]}),/*#__PURE__*/_jsx(\"td\",{className:\"adminDashPanel-right-table-body-value\",children:moment(employee.createdAt).format(\"DD-MMM-yyyy\")}),/*#__PURE__*/_jsxs(\"td\",{className:\"adminDashPanel-right-table-body-value\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handlePreview(employee);},children:/*#__PURE__*/_jsx(\"img\",{src:ViewIcon,alt:\"\",className:\"adminDashPanel-right-table-icon \"})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleDelete(employee);},children:/*#__PURE__*/_jsx(\"img\",{src:TrashIcon,alt:\"\",className:\"adminDashPanel-right-table-icon \"})})]})]},index);})})]})}),addEmployeeActive===\"addEmployee\"&&/*#__PURE__*/_jsx(AddEmployee,{setAddEmployeeActive:setAddEmployeeActive}),deleteEmployeeActive===\"deleteEmployee\"&&/*#__PURE__*/_jsx(DeleteEmployee,{setDeleteEmployeeActive:setDeleteEmployeeActive,employee:employee}),employeeDetail===\"employeeDetail\"&&/*#__PURE__*/_jsx(EmployeeDetail,{employee:employee,setEmployeeDetail:setEmployeeDetail})]});};export default Employee;","map":{"version":3,"sources":["F:/mern/projects/greenbeans/client/src/admin/Employee.js"],"names":["React","useState","useEffect","ViewIcon","TrashIcon","AddIcon","isAuthenticated","deleteEmployee","getEmployees","moment","AddEmployee","EmployeeDetail","DeleteEmployee","Employee","employees","setEmployees","status","setStatus","employee","setEmployee","addEmployeeActive","setAddEmployeeActive","deleteEmployeeActive","setDeleteEmployeeActive","employeeDetail","setEmployeeDetail","all","Available","NotAvailable","OnDuty","countValues","setCountValues","user","token","loadEmployees","userId","data","error","console","log","filterBtn","statusState","statusValue","statusBtnValue","loadCountValues","length","filter","Estatus","handlePreview","handleDelete","_id","map","index","Euser","name","email","phoneNumber","address","houseName","streetName","createdAt","format"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport ViewIcon from \"../icons/view.svg\";\r\nimport TrashIcon from \"../icons/Trash.svg\";\r\nimport AddIcon from \"../icons/add.svg\";\r\nimport { isAuthenticated } from \"../auth\";\r\nimport { deleteEmployee, getEmployees } from \"../user\";\r\nimport moment from \"moment\";\r\nimport AddEmployee from \"./AddEmployee\";\r\nimport EmployeeDetail from \"./EmployeeDetail\";\r\nimport DeleteEmployee from \"./DeleteEmployee\";\r\n\r\nconst Employee = () => {\r\n  const [employees, setEmployees] = useState([]);\r\n  const [status, setStatus] = useState(\"all\");\r\n  const [employee, setEmployee] = useState();\r\n  const [addEmployeeActive, setAddEmployeeActive] = useState(\"\");\r\n  const [deleteEmployeeActive, setDeleteEmployeeActive] = useState(\"\");\r\n  const [employeeDetail, setEmployeeDetail] = useState(\"\");\r\n  const [countValues, setCountValues] = useState({\r\n    all: 0,\r\n    Available: 0,\r\n    NotAvailable: 0,\r\n    OnDuty: 0,\r\n  });\r\n\r\n  const { user, token } = isAuthenticated();\r\n\r\n  const { all, Available, NotAvailable, OnDuty } = countValues;\r\n\r\n  const loadEmployees = async (userId, token, status) => {\r\n    try {\r\n      const data = await getEmployees(userId, token, status);\r\n      if (data.error) {\r\n        return console.log(data.error);\r\n      } else {\r\n        return setEmployees(data);\r\n      }\r\n    } catch (error) {\r\n      return console.log(error);\r\n    }\r\n  };\r\n\r\n  const filterBtn = (statusState, statusValue, statusBtnValue) => {\r\n    return (\r\n      <button\r\n        className={`orders-filter-btn ${\r\n          status === statusState ? \"active\" : \"\"\r\n        }`}\r\n        onClick={() => setStatus(statusState)}\r\n      >\r\n        {statusBtnValue} <span className=\"filter-btn-value\">{statusValue}</span>\r\n      </button>\r\n    );\r\n  };\r\n\r\n  const loadCountValues = async (userId, token) => {\r\n    var employees = [];\r\n    try {\r\n      const data = await getEmployees(userId, token, \"all\");\r\n      if (data.error) {\r\n        return console.log(data.error);\r\n      } else {\r\n        employees = data;\r\n      }\r\n    } catch (error) {\r\n      return console.log(error);\r\n    }\r\n\r\n    setCountValues({\r\n      ...countValues,\r\n      all: employees.length,\r\n      Available: employees.filter(\r\n        (employee) => employee.Estatus === \"Available\"\r\n      ).length,\r\n      NotAvailable: employees.filter(\r\n        (employee) => employee.Estatus === \"NotAvailable\"\r\n      ).length,\r\n      OnDuty: employees.filter((employee) => employee.Estatus === \"OnDuty\")\r\n        .length,\r\n    });\r\n  };\r\n\r\n  const handlePreview = (employee) => {\r\n    return setEmployeeDetail(\"employeeDetail\"), setEmployee(employee);\r\n  };\r\n\r\n  const handleDelete = async (employee) => {\r\n    return setDeleteEmployeeActive(\"deleteEmployee\"), setEmployee(employee);\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadEmployees(user._id, token, status);\r\n  }, [status, addEmployeeActive]);\r\n\r\n  useEffect(() => {\r\n    loadCountValues(user._id, token);\r\n  }, [status, addEmployeeActive]);\r\n\r\n  return (\r\n    <section className=\"adminDashPanel-section employee-section\">\r\n      <h1 className=\"adminDashPanel-right-header\">Employees</h1>\r\n      <div className=\"adminDashPanel-right-subsection adminDashPanel-product-add-btn-subSection\">\r\n        <button\r\n          className=\"adminDashPanel-product-add-btn\"\r\n          onClick={() => setAddEmployeeActive(\"addEmployee\")}\r\n        >\r\n          <img\r\n            src={AddIcon}\r\n            className=\"adminDashPanel-product-add-btn-icon\"\r\n            alt=\"\"\r\n          />\r\n          ADD EMPLOYEE\r\n        </button>\r\n      </div>\r\n      <div className=\"adminDashPanel-right-subsection adminDashPanel-product-filter-subSection\">\r\n        {filterBtn(\"all\", all, \"All\")}\r\n        {filterBtn(\"Available\", Available, \"Available\")}\r\n        {filterBtn(\"NotAvailable\", NotAvailable, \"NotAvailable\")}\r\n        {filterBtn(\"OnDuty\", OnDuty, \"On-Duty\")}\r\n      </div>\r\n      <div className=\"adminDashPanel-right-subsection\">\r\n        <table className=\"adminDashPanel-right-table\">\r\n          <thead className=\"adminDashPanel-right-table-head-sec\">\r\n            <tr>\r\n              <th className=\"adminDashPanel-right-table-head-value\">Name</th>\r\n              <th className=\"adminDashPanel-right-table-head-value\">\r\n                Employee ID\r\n              </th>\r\n              <th className=\"adminDashPanel-right-table-head-value\">Email</th>\r\n              <th className=\"adminDashPanel-right-table-head-value\">Status</th>\r\n              <th className=\"adminDashPanel-right-table-head-value\">\r\n                Phone Number\r\n              </th>\r\n              <th className=\"adminDashPanel-right-table-head-value\">Address</th>\r\n              <th className=\"adminDashPanel-right-table-head-value\">\r\n                Created At\r\n              </th>\r\n              <th className=\"adminDashPanel-right-table-head-value\">Action</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"adminDashPanel-right-table-body-sec\">\r\n            {employees &&\r\n              employees.map((employee, index) => {\r\n                return (\r\n                  <tr\r\n                    key={index}\r\n                    className=\"adminDashPanel-right-table-body-tr\"\r\n                  >\r\n                    <td className=\"adminDashPanel-right-table-body-value\">\r\n                      {employee.Euser.name}\r\n                    </td>\r\n                    <td className=\"adminDashPanel-right-table-body-value\">\r\n                      {employee._id}\r\n                    </td>\r\n                    <td className=\"adminDashPanel-right-table-body-value\">\r\n                      {employee.Euser.email}\r\n                    </td>\r\n                    <td className=\"adminDashPanel-right-table-body-value\">\r\n                      {employee.Estatus}\r\n                    </td>\r\n                    <td className=\"adminDashPanel-right-table-body-value\">\r\n                      {employee.Euser.phoneNumber}\r\n                    </td>\r\n                    <td className=\"adminDashPanel-right-table-body-value\">\r\n                      {employee.Euser.address.houseName}\r\n                      <br />\r\n                      {employee.Euser.address.streetName}\r\n                    </td>\r\n                    <td className=\"adminDashPanel-right-table-body-value\">\r\n                      {moment(employee.createdAt).format(\"DD-MMM-yyyy\")}\r\n                    </td>\r\n                    <td className=\"adminDashPanel-right-table-body-value\">\r\n                      <button onClick={() => handlePreview(employee)}>\r\n                        <img\r\n                          src={ViewIcon}\r\n                          alt=\"\"\r\n                          className=\"adminDashPanel-right-table-icon \"\r\n                        />\r\n                      </button>\r\n                      <button onClick={() => handleDelete(employee)}>\r\n                        <img\r\n                          src={TrashIcon}\r\n                          alt=\"\"\r\n                          className=\"adminDashPanel-right-table-icon \"\r\n                        />\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n      {addEmployeeActive === \"addEmployee\" && (\r\n        <AddEmployee setAddEmployeeActive={setAddEmployeeActive} />\r\n      )}\r\n      {deleteEmployeeActive === \"deleteEmployee\" && (\r\n        <DeleteEmployee\r\n          setDeleteEmployeeActive={setDeleteEmployeeActive}\r\n          employee={employee}\r\n        />\r\n      )}\r\n      {employeeDetail === \"employeeDetail\" && (\r\n        <EmployeeDetail\r\n          employee={employee}\r\n          setEmployeeDetail={setEmployeeDetail}\r\n        />\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Employee;\r\n"]},"metadata":{},"sourceType":"module"}