{"ast":null,"code":"import _asyncToGenerator from\"F:/mern/projects/greenbeans/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"F:/mern/projects/greenbeans/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"F:\\\\mern\\\\projects\\\\greenbeans\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect}from\"react\";import{isAuthenticated}from\"../auth\";import Cross from\"../icons/cross-black.svg\";import{addEmployeeOrder,getEmployees}from\"../user\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EmployeeUpdate=function EmployeeUpdate(_ref){var order=_ref.order,setOrderEmployeeAssignActive=_ref.setOrderEmployeeAssignActive;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),employees=_useState2[0],setEmployees=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),employeeId=_useState4[0],setEmployeeId=_useState4[1];var _isAuthenticated=isAuthenticated(),user=_isAuthenticated.user,token=_isAuthenticated.token;var preload=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userId,token){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getEmployees(userId,token,\"Available\");case 3:data=_context.sent;console.log(data);if(!data.error){_context.next=9;break;}return _context.abrupt(\"return\",console.log(data.error));case 9:return _context.abrupt(\"return\",setEmployees(data));case 10:_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);return _context.abrupt(\"return\",console.log(_context.t0));case 15:case\"end\":return _context.stop();}}},_callee,null,[[0,12]]);}));return function preload(_x,_x2){return _ref2.apply(this,arguments);};}();var handleEmployeeAssign=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(userId,token,orderId,employeeId){var data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return addEmployeeOrder(userId,token,orderId,employeeId);case 3:data=_context2.sent;if(!data.error){_context2.next=8;break;}return _context2.abrupt(\"return\",console.log(data.error));case 8:return _context2.abrupt(\"return\",setOrderEmployeeAssignActive(null));case 9:_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](0);return _context2.abrupt(\"return\",console.log(_context2.t0));case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[0,11]]);}));return function handleEmployeeAssign(_x3,_x4,_x5,_x6){return _ref3.apply(this,arguments);};}();useEffect(function(){preload(user._id,token);},[]);return/*#__PURE__*/_jsx(\"section\",{className:\"employeeUpdate-section\",children:/*#__PURE__*/_jsx(\"div\",{className:\"black-background\",children:/*#__PURE__*/_jsx(\"div\",{className:\"popup-small-sec\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"popup-group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"popup-head-sec\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"popup-header employeeUpdate-popup-header\",children:\"Assign Employee\"}),/*#__PURE__*/_jsx(\"div\",{className:\"cross-sec\",onClick:function onClick(){return setOrderEmployeeAssignActive(null);},children:/*#__PURE__*/_jsx(\"img\",{src:Cross,alt:\"\",className:\"cross-img\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"popup-form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"popup-form-single-group\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"popup-form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"popup-form-label\",children:\"Order ID\"}),/*#__PURE__*/_jsx(\"p\",{className:\"popup-form-value\",children:order._id})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"popup-form-single-group\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"popup-form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"popup-form-label\",children:\"Employee Name\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"employeeName\",id:\"employeeName\",value:employeeId,onChange:function onChange(e){return setEmployeeId(e.target.value);},className:\"popup-form-value\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select an Employee\"}),employees&&employees.map(function(employee,index){return/*#__PURE__*/_jsx(\"option\",{value:employee._id,children:employee.Euser.name},index);})]})]})}),/*#__PURE__*/_jsx(\"button\",{className:\"popup-form-btn \".concat(employeeId===\"\"?\"button-unclickable\":\"\"),onClick:function onClick(){return handleEmployeeAssign(user._id,token,order._id,employeeId);},children:\"Assign Employee\"})]})]})})})});};export default EmployeeUpdate;","map":{"version":3,"sources":["F:/mern/projects/greenbeans/client/src/admin/EmployeeUpdate.js"],"names":["React","useState","useEffect","isAuthenticated","Cross","addEmployeeOrder","getEmployees","EmployeeUpdate","order","setOrderEmployeeAssignActive","employees","setEmployees","employeeId","setEmployeeId","user","token","preload","userId","data","console","log","error","handleEmployeeAssign","orderId","_id","e","target","value","map","employee","index","Euser","name"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { isAuthenticated } from \"../auth\";\r\nimport Cross from \"../icons/cross-black.svg\";\r\nimport { addEmployeeOrder, getEmployees } from \"../user\";\r\n\r\nconst EmployeeUpdate = ({ order, setOrderEmployeeAssignActive }) => {\r\n  const [employees, setEmployees] = useState([]);\r\n  const [employeeId, setEmployeeId] = useState(\"\");\r\n\r\n  const { user, token } = isAuthenticated();\r\n\r\n  const preload = async (userId, token) => {\r\n    try {\r\n      const data = await getEmployees(userId, token, \"Available\");\r\n      console.log(data);\r\n      if (data.error) {\r\n        return console.log(data.error);\r\n      } else {\r\n        return setEmployees(data);\r\n      }\r\n    } catch (error) {\r\n      return console.log(error);\r\n    }\r\n  };\r\n\r\n  const handleEmployeeAssign = async (userId, token, orderId, employeeId) => {\r\n    try {\r\n      const data = await addEmployeeOrder(userId, token, orderId, employeeId);\r\n      if (data.error) {\r\n        return console.log(data.error);\r\n      } else {\r\n        return setOrderEmployeeAssignActive(null);\r\n      }\r\n    } catch (error) {\r\n      return console.log(error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    preload(user._id, token);\r\n  }, []);\r\n  return (\r\n    <section className=\"employeeUpdate-section\">\r\n      <div className=\"black-background\">\r\n        <div className=\"popup-small-sec\">\r\n          <div className=\"popup-group\">\r\n            <div className=\"popup-head-sec\">\r\n              <h1 className=\"popup-header employeeUpdate-popup-header\">\r\n                Assign Employee\r\n              </h1>\r\n              <div\r\n                className=\"cross-sec\"\r\n                onClick={() => setOrderEmployeeAssignActive(null)}\r\n              >\r\n                <img src={Cross} alt=\"\" className=\"cross-img\" />\r\n              </div>\r\n            </div>\r\n            <div className=\"popup-form\">\r\n              <div className=\"popup-form-single-group\">\r\n                <div className=\"popup-form-group\">\r\n                  <label className=\"popup-form-label\">Order ID</label>\r\n                  <p className=\"popup-form-value\">{order._id}</p>\r\n                </div>\r\n              </div>\r\n              <div className=\"popup-form-single-group\">\r\n                <div className=\"popup-form-group\">\r\n                  <label className=\"popup-form-label\">Employee Name</label>\r\n                  <select\r\n                    name=\"employeeName\"\r\n                    id=\"employeeName\"\r\n                    value={employeeId}\r\n                    onChange={(e) => setEmployeeId(e.target.value)}\r\n                    className=\"popup-form-value\"\r\n                  >\r\n                    <option value=\"\">Select an Employee</option>\r\n\r\n                    {employees &&\r\n                      employees.map((employee, index) => {\r\n                        return (\r\n                          <option key={index} value={employee._id}>\r\n                            {employee.Euser.name}\r\n                          </option>\r\n                        );\r\n                      })}\r\n                  </select>\r\n                </div>\r\n              </div>\r\n              <button\r\n                className={`popup-form-btn ${\r\n                  employeeId === \"\" ? \"button-unclickable\" : \"\"\r\n                }`}\r\n                onClick={() =>\r\n                  handleEmployeeAssign(user._id, token, order._id, employeeId)\r\n                }\r\n              >\r\n                Assign Employee\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default EmployeeUpdate;\r\n"]},"metadata":{},"sourceType":"module"}