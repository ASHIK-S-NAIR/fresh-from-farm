{"ast":null,"code":"import _objectSpread from\"F:/mern/projects/greenbeans/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"F:/mern/projects/greenbeans/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"F:/mern/projects/greenbeans/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"F:\\\\mern\\\\projects\\\\greenbeans\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect}from\"react\";import moment from\"moment\";import{getAllOrders}from\"../user\";import{isAuthenticated}from\"../auth\";import ViewIcon from\"../icons/view.svg\";import EditIcon from\"../icons/Edit.svg\";import OrderDetails from\"../user/OrderDetails\";import OrderUpdate from\"./OrderUpdate\";import EmployeeUpdate from\"./EmployeeUpdate\";import PaymentStatusUpdate from\"./PaymentStatusUpdate\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Order=function Order(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),orders=_useState2[0],setOrders=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),orderActive=_useState4[0],setOrderActive=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),orderUpdateActive=_useState6[0],setOrderUpdateActive=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),order=_useState8[0],setOrder=_useState8[1];var _useState9=useState(\"all\"),_useState10=_slicedToArray(_useState9,2),status=_useState10[0],setStatus=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),orderEmployeeAssignActive=_useState12[0],setOrderEmployeeAssignActive=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),orderUpdatePayment=_useState14[0],setOrderUpdatePayment=_useState14[1];var _useState15=useState({all:0,NotConfirmed:0,Ordered:0,Processing:0,PickingUp:0,OutForDelivery:0,Delivered:0,Cancelled:0}),_useState16=_slicedToArray(_useState15,2),countValues=_useState16[0],setCountValues=_useState16[1];var _isAuthenticated=isAuthenticated(),user=_isAuthenticated.user,token=_isAuthenticated.token;var all=countValues.all,NotConfirmed=countValues.NotConfirmed,Ordered=countValues.Ordered,Processing=countValues.Processing,PickingUp=countValues.PickingUp,OutForDelivery=countValues.OutForDelivery,Delivered=countValues.Delivered,Cancelled=countValues.Cancelled;var loadOrders=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userId,token,status){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getAllOrders(userId,token,status);case 3:data=_context.sent;if(!data.error){_context.next=8;break;}return _context.abrupt(\"return\",console.log(data.error));case 8:return _context.abrupt(\"return\",setOrders(data));case 9:_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);return _context.abrupt(\"return\",console.log(_context.t0));case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function loadOrders(_x,_x2,_x3){return _ref.apply(this,arguments);};}();var handlePreview=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(order){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt(\"return\",(setOrderActive(\"orderDetails\"),setOrder(order)));case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function handlePreview(_x4){return _ref2.apply(this,arguments);};}();var handleEdit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(order){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:return _context3.abrupt(\"return\",(setOrderUpdateActive(\"orderUpdateActive\"),setOrder(order)));case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function handleEdit(_x5){return _ref3.apply(this,arguments);};}();var handleEmployeeAssign=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(order){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:return _context4.abrupt(\"return\",(setOrderEmployeeAssignActive(\"orderEmployeeAssignActive\"),setOrder(order)));case 1:case\"end\":return _context4.stop();}}},_callee4);}));return function handleEmployeeAssign(_x6){return _ref4.apply(this,arguments);};}();var handlePaymentStatus=function handlePaymentStatus(order){return setOrderUpdatePayment(\"orderUpdatePayment\"),setOrder(order);};var filterBtn=function filterBtn(statusState,statusValue,statusBtnValue){return/*#__PURE__*/_jsxs(\"button\",{className:\"orders-filter-btn \".concat(status===statusState?\"active\":\"\"),onClick:function onClick(){return setStatus(statusState);},children:[statusBtnValue,\" \",/*#__PURE__*/_jsx(\"span\",{className:\"filter-btn-value\",children:statusValue})]});};var loadCountValues=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(userId,token){var orders,data;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:orders=[];_context5.prev=1;_context5.next=4;return getAllOrders(userId,token,\"all\");case 4:data=_context5.sent;if(!data.error){_context5.next=9;break;}return _context5.abrupt(\"return\",console.log(data.error));case 9:orders=data;case 10:_context5.next=15;break;case 12:_context5.prev=12;_context5.t0=_context5[\"catch\"](1);return _context5.abrupt(\"return\",console.log(_context5.t0));case 15:setCountValues(_objectSpread(_objectSpread({},countValues),{},{all:orders.length,NotConfirmed:orders.filter(function(order){return order.Ostatus===\"Not-Confirmed\";}).length,Ordered:orders.filter(function(order){return order.Ostatus===\"Ordered\";}).length,Processing:orders.filter(function(order){return order.Ostatus===\"Processing\";}).length,PickingUp:orders.filter(function(order){return order.Ostatus===\"Picking-Up\";}).length,OutForDelivery:orders.filter(function(order){return order.Ostatus===\"Out-For-Delivery\";}).length,Delivered:orders.filter(function(order){return order.Ostatus===\"Delivered\";}).length,Cancelled:orders.filter(function(order){return order.Ostatus===\"Cancelled\";}).length}));case 16:case\"end\":return _context5.stop();}}},_callee5,null,[[1,12]]);}));return function loadCountValues(_x7,_x8){return _ref5.apply(this,arguments);};}();useEffect(function(){loadOrders(user._id,token,status);},[orderActive,orderUpdateActive,status,orderEmployeeAssignActive]);useEffect(function(){loadCountValues(user._id,token);},[orderActive,orderUpdateActive,status,orderEmployeeAssignActive]);return/*#__PURE__*/_jsxs(\"section\",{className:\"adminDashPanel-right-section order-section\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"adminDashPanel-right-header\",children:\"Orders\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"adminDashPanel-right-subsection orders-filter-subSection\",children:[filterBtn(\"all\",all,\"All\"),filterBtn(\"Not-Confirmed\",NotConfirmed,\"Not-Confirmed\"),filterBtn(\"Ordered\",Ordered,\"Ordered\"),filterBtn(\"Processing\",Processing,\"Processing\"),filterBtn(\"Picking-Up\",PickingUp,\"Picking-Up\"),filterBtn(\"Out-For-Delivery\",OutForDelivery,\"Out-For-Delivery\"),filterBtn(\"Delivered\",Delivered,\"Delivered\"),filterBtn(\"Cancelled\",Cancelled,\"Cancelled\")]}),/*#__PURE__*/_jsx(\"div\",{className:\"adminDashPanel-right-subsection\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"adminDashPanel-right-table\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"adminDashPanel-right-table-head-sec\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"adminDashPanel-right-table-head-value\",children:\"Order ID\"}),/*#__PURE__*/_jsx(\"th\",{className:\"adminDashPanel-right-table-head-value\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"adminDashPanel-right-table-head-value\",children:\"Total\"}),/*#__PURE__*/_jsx(\"th\",{className:\"adminDashPanel-right-table-head-value\",children:\"Ordered On\"}),/*#__PURE__*/_jsx(\"th\",{className:\"adminDashPanel-right-table-head-value\",children:\"Payment Mode\"}),/*#__PURE__*/_jsx(\"th\",{className:\"adminDashPanel-right-table-head-value\",children:\"Payment Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"adminDashPanel-right-table-head-value\",children:\"Delivery Boy\"}),/*#__PURE__*/_jsx(\"th\",{className:\"adminDashPanel-right-table-head-value\",children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"adminDashPanel-right-table-body-sec\",children:orders&&orders.map(function(order,index){return/*#__PURE__*/_jsxs(\"tr\",{className:\"adminDashPanel-right-table-body-tr\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"adminDashPanel-right-table-body-value\",children:order._id}),/*#__PURE__*/_jsx(\"td\",{className:\"adminDashPanel-right-table-body-value\",children:/*#__PURE__*/_jsx(\"div\",{className:\"adminDashPanel-right-table-body-div \".concat(order.Ostatus),children:order.Ostatus})}),/*#__PURE__*/_jsx(\"td\",{className:\"adminDashPanel-right-table-body-value\",children:order.OtotalPrice}),/*#__PURE__*/_jsx(\"td\",{className:\"adminDashPanel-right-table-body-value\",children:moment(order.createdAt).format(\"DD-MMM-yyyy\")}),/*#__PURE__*/_jsx(\"td\",{className:\"adminDashPanel-right-table-body-value\",children:order.OpaymentMode}),/*#__PURE__*/_jsx(\"td\",{className:\"adminDashPanel-right-table-body-value\",children:order.OpaymentStatus===\"Paid\"?order.OpaymentStatus:/*#__PURE__*/_jsx(\"button\",{className:\"adminDashPanel-right-table-body-value-btn\",onClick:function onClick(){return handlePaymentStatus(order);},children:\"Pending\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"adminDashPanel-right-table-body-value\",children:order.Ostatus===\"Not-Confirmed\"?\" \":order.OemployeeName?order.OemployeeName:/*#__PURE__*/_jsx(\"button\",{className:\"adminDashPanel-right-table-body-value-btn\",onClick:function onClick(){return handleEmployeeAssign(order);},children:\"Not Assigned\"})}),/*#__PURE__*/_jsxs(\"td\",{className:\"adminDashPanel-right-table-body-value\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handlePreview(order);},children:/*#__PURE__*/_jsx(\"img\",{src:ViewIcon,alt:\"\",className:\"adminDashPanel-right-table-icon \"})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleEdit(order);},children:/*#__PURE__*/_jsx(\"img\",{src:EditIcon,alt:\"\",className:\"adminDashPanel-right-table-icon \"})})]})]},index);})})]})}),orderActive===\"orderDetails\"&&/*#__PURE__*/_jsx(OrderDetails,{setOrderActive:setOrderActive,order:order}),orderUpdateActive===\"orderUpdateActive\"&&/*#__PURE__*/_jsx(OrderUpdate,{setOrderUpdateActive:setOrderUpdateActive,order:order}),orderEmployeeAssignActive===\"orderEmployeeAssignActive\"&&/*#__PURE__*/_jsx(EmployeeUpdate,{setOrderEmployeeAssignActive:setOrderEmployeeAssignActive,order:order}),orderUpdatePayment===\"orderUpdatePayment\"&&/*#__PURE__*/_jsx(PaymentStatusUpdate,{setOrderUpdatePayment:setOrderUpdatePayment,order:order})]});};export default Order;","map":{"version":3,"sources":["F:/mern/projects/greenbeans/client/src/admin/Order.js"],"names":["React","useState","useEffect","moment","getAllOrders","isAuthenticated","ViewIcon","EditIcon","OrderDetails","OrderUpdate","EmployeeUpdate","PaymentStatusUpdate","Order","orders","setOrders","orderActive","setOrderActive","orderUpdateActive","setOrderUpdateActive","order","setOrder","status","setStatus","orderEmployeeAssignActive","setOrderEmployeeAssignActive","orderUpdatePayment","setOrderUpdatePayment","all","NotConfirmed","Ordered","Processing","PickingUp","OutForDelivery","Delivered","Cancelled","countValues","setCountValues","user","token","loadOrders","userId","data","error","console","log","handlePreview","handleEdit","handleEmployeeAssign","handlePaymentStatus","filterBtn","statusState","statusValue","statusBtnValue","loadCountValues","length","filter","Ostatus","_id","map","index","OtotalPrice","createdAt","format","OpaymentMode","OpaymentStatus","OemployeeName"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport moment from \"moment\";\r\nimport { getAllOrders } from \"../user\";\r\nimport { isAuthenticated } from \"../auth\";\r\nimport ViewIcon from \"../icons/view.svg\";\r\nimport EditIcon from \"../icons/Edit.svg\";\r\nimport OrderDetails from \"../user/OrderDetails\";\r\nimport OrderUpdate from \"./OrderUpdate\";\r\nimport EmployeeUpdate from \"./EmployeeUpdate\";\r\nimport PaymentStatusUpdate from \"./PaymentStatusUpdate\";\r\n\r\nconst Order = () => {\r\n  const [orders, setOrders] = useState([]);\r\n  const [orderActive, setOrderActive] = useState(\"\");\r\n  const [orderUpdateActive, setOrderUpdateActive] = useState(\"\");\r\n  const [order, setOrder] = useState({});\r\n  const [status, setStatus] = useState(\"all\");\r\n  const [orderEmployeeAssignActive, setOrderEmployeeAssignActive] =\r\n    useState(\"\");\r\n  const [orderUpdatePayment, setOrderUpdatePayment] = useState(\"\");\r\n  const [countValues, setCountValues] = useState({\r\n    all: 0,\r\n    NotConfirmed: 0,\r\n    Ordered: 0,\r\n    Processing: 0,\r\n    PickingUp: 0,\r\n    OutForDelivery: 0,\r\n    Delivered: 0,\r\n    Cancelled: 0,\r\n  });\r\n\r\n  const { user, token } = isAuthenticated();\r\n\r\n  const {\r\n    all,\r\n    NotConfirmed,\r\n    Ordered,\r\n    Processing,\r\n    PickingUp,\r\n    OutForDelivery,\r\n    Delivered,\r\n    Cancelled,\r\n  } = countValues;\r\n\r\n  const loadOrders = async (userId, token, status) => {\r\n    try {\r\n      const data = await getAllOrders(userId, token, status);\r\n      if (data.error) {\r\n        return console.log(data.error);\r\n      } else {\r\n        return setOrders(data);\r\n      }\r\n    } catch (error) {\r\n      return console.log(error);\r\n    }\r\n  };\r\n\r\n  const handlePreview = async (order) => {\r\n    return setOrderActive(\"orderDetails\"), setOrder(order);\r\n  };\r\n\r\n  const handleEdit = async (order) => {\r\n    return setOrderUpdateActive(\"orderUpdateActive\"), setOrder(order);\r\n  };\r\n\r\n  const handleEmployeeAssign = async (order) => {\r\n    return (\r\n      setOrderEmployeeAssignActive(\"orderEmployeeAssignActive\"), setOrder(order)\r\n    );\r\n  };\r\n\r\n  const handlePaymentStatus = (order) => {\r\n    return setOrderUpdatePayment(\"orderUpdatePayment\"), setOrder(order);\r\n  };\r\n\r\n  const filterBtn = (statusState, statusValue, statusBtnValue) => {\r\n    return (\r\n      <button\r\n        className={`orders-filter-btn ${\r\n          status === statusState ? \"active\" : \"\"\r\n        }`}\r\n        onClick={() => setStatus(statusState)}\r\n      >\r\n        {statusBtnValue} <span className=\"filter-btn-value\">{statusValue}</span>\r\n      </button>\r\n    );\r\n  };\r\n\r\n  const loadCountValues = async (userId, token) => {\r\n    var orders = [];\r\n    try {\r\n      const data = await getAllOrders(userId, token, \"all\");\r\n      if (data.error) {\r\n        return console.log(data.error);\r\n      } else {\r\n        orders = data;\r\n      }\r\n    } catch (error) {\r\n      return console.log(error);\r\n    }\r\n\r\n    setCountValues({\r\n      ...countValues,\r\n      all: orders.length,\r\n      NotConfirmed: orders.filter((order) => order.Ostatus === \"Not-Confirmed\")\r\n        .length,\r\n      Ordered: orders.filter((order) => order.Ostatus === \"Ordered\").length,\r\n      Processing: orders.filter((order) => order.Ostatus === \"Processing\")\r\n        .length,\r\n      PickingUp: orders.filter((order) => order.Ostatus === \"Picking-Up\")\r\n        .length,\r\n      OutForDelivery: orders.filter(\r\n        (order) => order.Ostatus === \"Out-For-Delivery\"\r\n      ).length,\r\n      Delivered: orders.filter((order) => order.Ostatus === \"Delivered\").length,\r\n      Cancelled: orders.filter((order) => order.Ostatus === \"Cancelled\").length,\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadOrders(user._id, token, status);\r\n  }, [orderActive, orderUpdateActive, status, orderEmployeeAssignActive]);\r\n\r\n  useEffect(() => {\r\n    loadCountValues(user._id, token);\r\n  }, [orderActive, orderUpdateActive, status, orderEmployeeAssignActive]);\r\n\r\n  return (\r\n    <section className=\"adminDashPanel-right-section order-section\">\r\n      <h1 className=\"adminDashPanel-right-header\">Orders</h1>\r\n      <div className=\"adminDashPanel-right-subsection orders-filter-subSection\">\r\n        {filterBtn(\"all\", all, \"All\")}\r\n        {filterBtn(\"Not-Confirmed\", NotConfirmed, \"Not-Confirmed\")}\r\n        {filterBtn(\"Ordered\", Ordered, \"Ordered\")}\r\n        {filterBtn(\"Processing\", Processing, \"Processing\")}\r\n        {filterBtn(\"Picking-Up\", PickingUp, \"Picking-Up\")}\r\n        {filterBtn(\"Out-For-Delivery\", OutForDelivery, \"Out-For-Delivery\")}\r\n        {filterBtn(\"Delivered\", Delivered, \"Delivered\")}\r\n        {filterBtn(\"Cancelled\", Cancelled, \"Cancelled\")}\r\n      </div>\r\n      <div className=\"adminDashPanel-right-subsection\">\r\n        <table className=\"adminDashPanel-right-table\">\r\n          <thead className=\"adminDashPanel-right-table-head-sec\">\r\n            <tr>\r\n              <th className=\"adminDashPanel-right-table-head-value\">\r\n                Order ID\r\n              </th>\r\n              <th className=\"adminDashPanel-right-table-head-value\">Status</th>\r\n              <th className=\"adminDashPanel-right-table-head-value\">Total</th>\r\n              <th className=\"adminDashPanel-right-table-head-value\">\r\n                Ordered On\r\n              </th>\r\n              <th className=\"adminDashPanel-right-table-head-value\">\r\n                Payment Mode\r\n              </th>\r\n              <th className=\"adminDashPanel-right-table-head-value\">\r\n                Payment Status\r\n              </th>\r\n              <th className=\"adminDashPanel-right-table-head-value\">\r\n                Delivery Boy\r\n              </th>\r\n              <th className=\"adminDashPanel-right-table-head-value\">Action</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"adminDashPanel-right-table-body-sec\">\r\n            {orders &&\r\n              orders.map((order, index) => {\r\n                return (\r\n                  <tr\r\n                    key={index}\r\n                    className=\"adminDashPanel-right-table-body-tr\"\r\n                  >\r\n                    <td className=\"adminDashPanel-right-table-body-value\">\r\n                      {order._id}\r\n                    </td>\r\n                    <td className=\"adminDashPanel-right-table-body-value\">\r\n                      <div\r\n                        className={`adminDashPanel-right-table-body-div ${order.Ostatus}`}\r\n                      >\r\n                        {order.Ostatus}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"adminDashPanel-right-table-body-value\">\r\n                      {order.OtotalPrice}\r\n                    </td>\r\n                    <td className=\"adminDashPanel-right-table-body-value\">\r\n                      {moment(order.createdAt).format(\"DD-MMM-yyyy\")}\r\n                    </td>\r\n                    <td className=\"adminDashPanel-right-table-body-value\">\r\n                      {order.OpaymentMode}\r\n                    </td>\r\n                    <td className=\"adminDashPanel-right-table-body-value\">\r\n                      {order.OpaymentStatus === \"Paid\" ? (\r\n                        order.OpaymentStatus\r\n                      ) : (\r\n                        <button\r\n                          className=\"adminDashPanel-right-table-body-value-btn\"\r\n                          onClick={() => handlePaymentStatus(order)}\r\n                        >\r\n                          Pending\r\n                        </button>\r\n                      )}\r\n                    </td>\r\n                    <td className=\"adminDashPanel-right-table-body-value\">\r\n                    {order.Ostatus === \"Not-Confirmed\" ? (\r\n                        \" \"\r\n                      ) : order.OemployeeName ? (\r\n                        order.OemployeeName\r\n                      ) : (\r\n                        <button\r\n                          className=\"adminDashPanel-right-table-body-value-btn\"\r\n                          onClick={() => handleEmployeeAssign(order)}\r\n                        >\r\n                          Not Assigned\r\n                        </button>\r\n                      )}\r\n                    </td>\r\n                    <td className=\"adminDashPanel-right-table-body-value\">\r\n                      <button onClick={() => handlePreview(order)}>\r\n                        <img\r\n                          src={ViewIcon}\r\n                          alt=\"\"\r\n                          className=\"adminDashPanel-right-table-icon \"\r\n                        />\r\n                      </button>\r\n                      <button onClick={() => handleEdit(order)}>\r\n                        <img\r\n                          src={EditIcon}\r\n                          alt=\"\"\r\n                          className=\"adminDashPanel-right-table-icon \"\r\n                        />\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n      {orderActive === \"orderDetails\" && (\r\n        <OrderDetails setOrderActive={setOrderActive} order={order} />\r\n      )}\r\n      {orderUpdateActive === \"orderUpdateActive\" && (\r\n        <OrderUpdate\r\n          setOrderUpdateActive={setOrderUpdateActive}\r\n          order={order}\r\n        />\r\n      )}\r\n      {orderEmployeeAssignActive === \"orderEmployeeAssignActive\" && (\r\n        <EmployeeUpdate\r\n          setOrderEmployeeAssignActive={setOrderEmployeeAssignActive}\r\n          order={order}\r\n        />\r\n      )}\r\n      {orderUpdatePayment === \"orderUpdatePayment\" && (\r\n        <PaymentStatusUpdate\r\n          setOrderUpdatePayment={setOrderUpdatePayment}\r\n          order={order}\r\n        />\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Order;\r\n"]},"metadata":{},"sourceType":"module"}