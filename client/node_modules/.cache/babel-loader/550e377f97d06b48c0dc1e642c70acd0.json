{"ast":null,"code":"import _asyncToGenerator from\"F:/mern/projects/greenbeans/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"F:/mern/projects/greenbeans/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"F:\\\\mern\\\\projects\\\\greenbeans\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect}from\"react\";import{useParams}from\"react-router-dom\";import{isAuthenticated}from\"../auth\";import{getUserOrders}from\"../user\";import ViewIcon from\"../icons/view.svg\";import moment from\"moment\";import OrderDetails from\"../user/OrderDetails\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Orders=function Orders(){var _useParams=useParams(),userId=_useParams.userId;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),orders=_useState2[0],setOrders=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),orderActive=_useState4[0],setOrderActive=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),order=_useState6[0],setOrder=_useState6[1];var _isAuthenticated=isAuthenticated(),user=_isAuthenticated.user,token=_isAuthenticated.token;var getUserOrderDetails=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userId,token){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getUserOrders(userId,token);case 3:data=_context.sent;if(!data.error){_context.next=8;break;}return _context.abrupt(\"return\",console.log(data.error));case 8:return _context.abrupt(\"return\",setOrders(data));case 9:_context.next=13;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function getUserOrderDetails(_x,_x2){return _ref.apply(this,arguments);};}();useEffect(function(){getUserOrderDetails(userId,token);},[]);var handlePreview=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(order){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt(\"return\",(setOrderActive(\"orderDetails\"),setOrder(order)));case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function handlePreview(_x3){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"section\",{className:\"userBoard-right-section accounts-section\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"userBoard-right-header\",children:\"Orders\"}),/*#__PURE__*/_jsx(\"div\",{className:\"userBoard-right-subSec\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"userBoard-right-customer-order-table\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"userBoard-right-customer-order-table-head-sec\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"userBoard-right-customer-order-table-head-value\",children:\"Order ID\"}),/*#__PURE__*/_jsx(\"th\",{className:\"userBoard-right-customer-order-table-head-value\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"userBoard-right-customer-order-table-head-value\",children:\"Total\"}),/*#__PURE__*/_jsx(\"th\",{className:\"userBoard-right-customer-order-table-head-value\",children:\"Ordered On\"}),/*#__PURE__*/_jsx(\"th\",{className:\"userBoard-right-customer-order-table-head-value\",children:\"Payment Mode\"}),/*#__PURE__*/_jsx(\"th\",{className:\"userBoard-right-customer-order-table-head-value\",children:\"Delivery Boy\"}),/*#__PURE__*/_jsx(\"th\",{className:\"userBoard-right-customer-order-table-head-value\",children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"userBoard-right-customer-order-table-body-sec\",children:orders&&orders.map(function(order,index){return/*#__PURE__*/_jsxs(\"tr\",{className:\"userBoard-right-customer-order-table-body-tr\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"userBoard-right-customer-order-table-body-value\",children:order._id}),/*#__PURE__*/_jsx(\"td\",{className:\"userBoard-right-customer-order-table-body-value\",children:/*#__PURE__*/_jsx(\"div\",{className:\"userBoard-right-customer-order-table-body-div \".concat(order.Ostatus),children:order.Ostatus})}),/*#__PURE__*/_jsx(\"td\",{className:\"userBoard-right-customer-order-table-body-value\",children:order.OtotalPrice}),/*#__PURE__*/_jsx(\"td\",{className:\"userBoard-right-customer-order-table-body-value\",children:moment(order.createdAt).format(\"DD-MMM-yyyy\")}),/*#__PURE__*/_jsx(\"td\",{className:\"userBoard-right-customer-order-table-body-value\",children:order.OpaymentMode}),/*#__PURE__*/_jsx(\"td\",{className:\"userBoard-right-customer-order-table-body-value\",children:order.OemployeeId?order.OemployeeId:\"Not Assigned\"}),/*#__PURE__*/_jsx(\"td\",{className:\"userBoard-right-customer-order-table-head-value\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handlePreview(order);},children:/*#__PURE__*/_jsx(\"img\",{src:ViewIcon,alt:\"\",className:\"employeeBoard-right-table-icon vie\"})})})]},index);})})]})}),orderActive===\"orderDetails\"&&/*#__PURE__*/_jsx(OrderDetails,{setOrderActive:setOrderActive,order:order})]});};export default Orders;","map":{"version":3,"sources":["F:/mern/projects/greenbeans/client/src/core/Orders.js"],"names":["React","useState","useEffect","useParams","isAuthenticated","getUserOrders","ViewIcon","moment","OrderDetails","Orders","userId","orders","setOrders","orderActive","setOrderActive","order","setOrder","user","token","getUserOrderDetails","data","error","console","log","handlePreview","map","index","_id","Ostatus","OtotalPrice","createdAt","format","OpaymentMode","OemployeeId"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { isAuthenticated } from \"../auth\";\r\nimport { getUserOrders } from \"../user\";\r\nimport ViewIcon from \"../icons/view.svg\";\r\nimport moment from \"moment\";\r\nimport OrderDetails from \"../user/OrderDetails\";\r\n\r\nconst Orders = () => {\r\n  const { userId } = useParams();\r\n\r\n  const [orders, setOrders] = useState([]);\r\n  const [orderActive, setOrderActive] = useState(null);\r\n  const [order, setOrder] = useState();\r\n\r\n  const { user, token } = isAuthenticated();\r\n\r\n  const getUserOrderDetails = async (userId, token) => {\r\n    try {\r\n      const data = await getUserOrders(userId, token);\r\n      if (data.error) {\r\n        return console.log(data.error);\r\n      } else {\r\n        return setOrders(data);\r\n      }\r\n    } catch (error) {}\r\n  };\r\n\r\n  useEffect(() => {\r\n    getUserOrderDetails(userId, token);\r\n  }, []);\r\n\r\n  const handlePreview = async (order) => {\r\n    return setOrderActive(\"orderDetails\"), setOrder(order);\r\n  };\r\n\r\n  return (\r\n    <section className=\"userBoard-right-section accounts-section\">\r\n      <h1 className=\"userBoard-right-header\">Orders</h1>\r\n      <div className=\"userBoard-right-subSec\">\r\n        <table className=\"userBoard-right-customer-order-table\">\r\n          <thead className=\"userBoard-right-customer-order-table-head-sec\">\r\n            <tr>\r\n              <th className=\"userBoard-right-customer-order-table-head-value\">\r\n                Order ID\r\n              </th>\r\n              <th className=\"userBoard-right-customer-order-table-head-value\">\r\n                Status\r\n              </th>\r\n              <th className=\"userBoard-right-customer-order-table-head-value\">\r\n                Total\r\n              </th>\r\n              <th className=\"userBoard-right-customer-order-table-head-value\">\r\n                Ordered On\r\n              </th>\r\n              <th className=\"userBoard-right-customer-order-table-head-value\">\r\n                Payment Mode\r\n              </th>\r\n              <th className=\"userBoard-right-customer-order-table-head-value\">\r\n                Delivery Boy\r\n              </th>\r\n              <th className=\"userBoard-right-customer-order-table-head-value\">\r\n                Action\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"userBoard-right-customer-order-table-body-sec\">\r\n            {orders &&\r\n              orders.map((order, index) => {\r\n                return (\r\n                  <tr\r\n                    key={index}\r\n                    className=\"userBoard-right-customer-order-table-body-tr\"\r\n                  >\r\n                    <td className=\"userBoard-right-customer-order-table-body-value\">\r\n                      {order._id}\r\n                    </td>\r\n                    <td className=\"userBoard-right-customer-order-table-body-value\">\r\n                      <div\r\n                        className={`userBoard-right-customer-order-table-body-div ${order.Ostatus}`}\r\n                      >\r\n                        {order.Ostatus}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"userBoard-right-customer-order-table-body-value\">\r\n                      {order.OtotalPrice}\r\n                    </td>\r\n                    <td className=\"userBoard-right-customer-order-table-body-value\">\r\n                      {moment(order.createdAt).format(\"DD-MMM-yyyy\")}\r\n                    </td>\r\n                    <td className=\"userBoard-right-customer-order-table-body-value\">\r\n                      {order.OpaymentMode}\r\n                    </td>\r\n                    <td className=\"userBoard-right-customer-order-table-body-value\">\r\n                      {order.OemployeeId ? order.OemployeeId : \"Not Assigned\"}\r\n                    </td>\r\n                    <td className=\"userBoard-right-customer-order-table-head-value\">\r\n                      <button onClick={() => handlePreview(order)}>\r\n                      <img\r\n                          src={ViewIcon}\r\n                          alt=\"\"\r\n                          className=\"employeeBoard-right-table-icon vie\"\r\n                        />\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {orderActive === \"orderDetails\" && (\r\n        <OrderDetails setOrderActive={setOrderActive} order={order} />\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Orders;\r\n"]},"metadata":{},"sourceType":"module"}