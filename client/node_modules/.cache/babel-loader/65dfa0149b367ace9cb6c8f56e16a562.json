{"ast":null,"code":"import _objectSpread from\"F:/mern/projects/greenbeans/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"F:/mern/projects/greenbeans/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"F:/mern/projects/greenbeans/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"F:\\\\mern\\\\projects\\\\greenbeans\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect}from\"react\";import{API}from\"../backend\";import Trash from\"../icons/Trash.svg\";import{getProduct}from\"./helper/productDetailHelper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var CartItem=function CartItem(_ref){var cartItemProductId=_ref.cartItemProductId,cartItemQuantity=_ref.cartItemQuantity,updateQuantity=_ref.updateQuantity,deleteProduct=_ref.deleteProduct;var _useState=useState({_id:\"\",pName:\"\",pPrice:\"\",pCategory:\"\",pImg:\"\"}),_useState2=_slicedToArray(_useState,2),product=_useState2[0],setProduct=_useState2[1];var _useState3=useState(cartItemQuantity),_useState4=_slicedToArray(_useState3,2),quantity=_useState4[0],setQuantity=_useState4[1];var _id=product._id,pName=product.pName,pPrice=product.pPrice,pCategory=product.pCategory,pImg=product.pImg;var getProductDetails=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(productId){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getProduct(productId);case 3:data=_context.sent;if(!data.error){_context.next=8;break;}return _context.abrupt(\"return\",console.log(data.error));case 8:return _context.abrupt(\"return\",setProduct(_objectSpread(_objectSpread({},product),{},{_id:data._id,pName:data.pName,pPrice:data.pPrice,pCategory:data.pCategory,pImg:data.pImg})));case 9:_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function getProductDetails(_x){return _ref2.apply(this,arguments);};}();useEffect(function(){getProductDetails(cartItemProductId);},[]);useEffect(function(){updateQuantity(product._id,quantity);},[quantity]);return/*#__PURE__*/_jsx(\"div\",{className:\"cartItem-item\",children:pImg!==\"\"&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cartItem-item-left\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cartItem-item-img-sec\",children:/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(API,\"/product/photo/\").concat(pImg.key),alt:\"\",className:\"cartItem-item-img\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"cartItem-item-info\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"cartItem-item-productName\",children:pName}),/*#__PURE__*/_jsx(\"div\",{className:\"cartItem-item-category-sec \".concat(pCategory===\"vegetable\"?\"color-green\":\"color-orange\"),children:/*#__PURE__*/_jsx(\"p\",{className:\"cartItem-item-category\",children:pCategory===\"vegetable\"?\"Veg\":\"Fruit\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cartItem-item-action\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cartItem-item-quantity-sec\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"cartItem-item-quantity-h3\",children:\"QTY:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"cartItem-item-quantity-input\",onChange:function onChange(e){return setQuantity(e.target.value);},value:quantity}),/*#__PURE__*/_jsx(\"h4\",{className:\"cartItem-item-quantity-h3\",children:\"Kg\"})]}),/*#__PURE__*/_jsx(\"img\",{src:Trash,alt:\"\",className:\"cartItem-item-delete-icon\",onClick:function onClick(){return deleteProduct(_id);}})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"cartItem-item-right\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"cartItem-item-price\",children:\"\".concat(pPrice,\"/Kg\")})})]})});};export default CartItem;","map":{"version":3,"sources":["F:/mern/projects/greenbeans/client/src/core/CartItem.js"],"names":["React","useState","useEffect","API","Trash","getProduct","CartItem","cartItemProductId","cartItemQuantity","updateQuantity","deleteProduct","_id","pName","pPrice","pCategory","pImg","product","setProduct","quantity","setQuantity","getProductDetails","productId","data","error","console","log","key","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { API } from \"../backend\";\r\nimport Trash from \"../icons/Trash.svg\";\r\nimport { getProduct } from \"./helper/productDetailHelper\";\r\n\r\nconst CartItem = ({\r\n  cartItemProductId,\r\n  cartItemQuantity,\r\n  updateQuantity,\r\n  deleteProduct,\r\n}) => {\r\n  const [product, setProduct] = useState({\r\n    _id: \"\",\r\n    pName: \"\",\r\n    pPrice: \"\",\r\n    pCategory: \"\",\r\n    pImg: \"\",\r\n  });\r\n  const [quantity, setQuantity] = useState(cartItemQuantity);\r\n\r\n  const { _id, pName, pPrice, pCategory, pImg } = product;\r\n\r\n  const getProductDetails = async (productId) => {\r\n    try {\r\n      const data = await getProduct(productId);\r\n      if (data.error) {\r\n        return console.log(data.error);\r\n      } else {\r\n        return setProduct({\r\n          ...product,\r\n          _id: data._id,\r\n          pName: data.pName,\r\n          pPrice: data.pPrice,\r\n          pCategory: data.pCategory,\r\n          pImg: data.pImg,\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getProductDetails(cartItemProductId);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    updateQuantity(product._id, quantity);\r\n  }, [quantity]);\r\n    \r\n  return (\r\n    <div className=\"cartItem-item\">\r\n      {pImg !== \"\" && (\r\n        <>\r\n          <div className=\"cartItem-item-left\">\r\n            <div className=\"cartItem-item-img-sec\">\r\n              <img\r\n                src={`${API}/product/photo/${pImg.key}`}\r\n                alt=\"\"\r\n                className=\"cartItem-item-img\"\r\n              />\r\n            </div>\r\n            <div className=\"cartItem-item-info\">\r\n              <h2 className=\"cartItem-item-productName\">{pName}</h2>\r\n              <div\r\n                className={`cartItem-item-category-sec ${\r\n                  pCategory === \"vegetable\" ? \"color-green\" : \"color-orange\"\r\n                }`}\r\n              >\r\n                <p className=\"cartItem-item-category\">\r\n                  {pCategory === \"vegetable\" ? \"Veg\" : \"Fruit\"}\r\n                </p>\r\n              </div>\r\n            </div>\r\n            <div className=\"cartItem-item-action\">\r\n              <div className=\"cartItem-item-quantity-sec\">\r\n                <h4 className=\"cartItem-item-quantity-h3\">QTY:</h4>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"cartItem-item-quantity-input\"\r\n                  onChange={(e) => setQuantity(e.target.value)}\r\n                  value={quantity}\r\n                />\r\n                <h4 className=\"cartItem-item-quantity-h3\">Kg</h4>\r\n              </div>\r\n              <img\r\n                src={Trash}\r\n                alt=\"\"\r\n                className=\"cartItem-item-delete-icon\"\r\n                onClick={() => deleteProduct(_id)}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"cartItem-item-right\">\r\n            <h2 className=\"cartItem-item-price\">{`${pPrice}/Kg`}</h2>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CartItem;\r\n"]},"metadata":{},"sourceType":"module"}